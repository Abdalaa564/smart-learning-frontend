import{$ as a,$a as K,A as v,Aa as ye,Ab as j,B as b,Ba as Ee,Bb as ue,Ca as oe,Cb as Ae,D as u,Db as we,Ea as _,Eb as ut,F as We,Fb as gt,G as l,Ga as Ie,Gb as ft,H as r,I as n,J as p,Jb as ht,K as P,L as I,M as Q,N as C,O as x,Oa as ae,P as T,Q as Ye,R as f,S as Je,T as c,U as W,Ua as Xe,V as Y,Va as et,W as J,Wa as se,X as H,Y as Ze,Ya as tt,Z as ne,Za as te,aa as g,ab as nt,ba as h,ca as ie,cb as le,da as R,db as it,ea as B,fa as $,fb as rt,i as fe,ib as ot,j as he,jb as de,ka as Ke,kb as me,la as ve,lb as ce,ma as M,n as _e,na as D,o as Ce,oa as re,q as y,qa as G,r as E,rb as at,sb as pe,ta as Z,tb as st,u as k,ua as A,ub as lt,v as Ge,va as w,vb as dt,wa as xe,wb as mt,xa as Se,xb as z,y as s,yb as ct,z as U,zb as pt}from"./chunk-WIMR6LWO.js";function xt(i,t){i&1&&(r(0,"span",8),a(1," Learnzie "),n())}function St(i,t){if(i&1&&(r(0,"span"),a(1),n()),i&2){let e=c().$implicit;s(),g(e.label)}}function yt(i,t){if(i&1){let e=T();r(0,"button",9),f("click",function(){let d=y(e).$implicit,m=c();return E(m.onSelect(d.id))}),p(1,"i",10),u(2,St,2,1,"span",11),n()}if(i&2){let e=t.$implicit,o=c();l("ngClass",o.activePage===e.id?"btn-accent":"btn-outline-light text-secondary"),s(),l("ngClass",e.iconClass),s(),l("ngIf",o.sidebarOpen)}}var Pe=class i{sidebarOpen=!0;menuItems=[];activePage;pageChange=new U;onSelect(t){this.pageChange.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-sidebar"]],inputs:{sidebarOpen:"sidebarOpen",menuItems:"menuItems",activePage:"activePage"},outputs:{pageChange:"pageChange"},decls:9,vars:3,consts:[[1,"border-end","d-flex","flex-column","transition-all","vh-100",3,"ngClass"],[1,"p-3","border-bottom"],[1,"d-flex","align-items-center"],[1,"d-flex","align-items-center","justify-content-center","bg-accent","text-white","fw-bold","rounded","me-2",2,"width","40px","height","40px"],["class","fs-5 fw-bold ",4,"ngIf"],[1,"grow","p-2"],["class","btn w-100 text-start d-flex align-items-center mb-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-auto"],[1,"fs-5","fw-bold"],[1,"btn","w-100","text-start","d-flex","align-items-center","mb-2",3,"click","ngClass"],[1,"me-2",3,"ngClass"],[4,"ngIf"]],template:function(e,o){e&1&&(r(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3),a(4," L "),n(),u(5,xt,2,0,"span",4),n()(),r(6,"nav",5),u(7,yt,3,3,"button",6),p(8,"div",7),n()()),e&2&&(l("ngClass",o.sidebarOpen?"sidebar-open":"sidebar-collapsed"),s(5),l("ngIf",o.sidebarOpen),s(2),l("ngForOf",o.menuItems))},dependencies:[_,Z,A,w],styles:[".sidebar-open[_ngcontent-%COMP%]{width:16rem;transition:width .3s ease}.sidebar-collapsed[_ngcontent-%COMP%]{width:4.5rem;transition:width .3s ease}[_nghost-%COMP%]{display:block;height:100vh}.grow[_ngcontent-%COMP%]{flex-grow:1}.btn-accent[_ngcontent-%COMP%]:hover{color:#fff!important}"]})};var Te=class i{adminName="";toggleSidebar=new U;getInitials(t){return t?t.split(" ").filter(e=>!!e).map(e=>e[0]).join("").toUpperCase().slice(0,2):"A"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-header"]],inputs:{adminName:"adminName"},outputs:{toggleSidebar:"toggleSidebar"},decls:16,vars:2,consts:[[1,"border-bottom","px-3","py-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-light",3,"click"],[1,"bi","bi-list"],[1,"d-flex","align-items-center","gap-3"],[1,"btn","btn-light","position-relative"],[1,"bi","bi-bell"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger","p-1"],[1,"d-flex","align-items-center"],[1,"rounded-circle","bg-accent","text-white","fw-bold","d-flex","align-items-center","justify-content-center","me-2",2,"width","40px","height","40px"],[1,"d-none","d-md-block"],[1,"fw-semibold"],[1,"small"]],template:function(e,o){e&1&&(P(0,"header",0)(1,"div",1)(2,"button",2),Je("click",function(){return o.toggleSidebar.emit()}),Q(3,"i",3),I(),P(4,"div",4)(5,"button",5),Q(6,"i",6)(7,"span",7),I(),P(8,"div",8)(9,"div",9),a(10),I(),P(11,"div",10)(12,"div",11),a(13),I(),P(14,"div",12),a(15,"@admin"),I()()()()()()),e&2&&(s(10),h(" ",o.getInitials(o.adminName)," "),s(3),g(o.adminName||"Admin"))},dependencies:[_],styles:["header[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{border-radius:999px}"]})};var Et=(i,t,e)=>({"bg-accent-subtle text-accent":i,"bg-success-subtle text-success":t,"bg-danger-subtle text-danger":e}),It=(i,t,e)=>({"bi-people":i,"bi-mortarboard":t,"bi-journal-bookmark":e});function At(i,t){if(i&1&&(r(0,"li",72)(1,"div",42),p(2,"span",73),r(3,"span",44),a(4),n()(),r(5,"span",24),a(6),n()()),i&2){let e=t.$implicit;s(2),l("ngClass",e.colorClass),s(2),h(" ",e.name," "),s(2),h(" ",e.value,"% ")}}function wt(i,t){if(i&1&&(r(0,"div",74)(1,"div",75)(2,"span"),a(3),n(),r(4,"span"),a(5),n()(),r(6,"div",76),p(7,"div",77),n()()),i&2){let e=t.$implicit;s(3),g(e.name),s(2),h("",e.value,"%"),s(2),Ze("width",e.value,"%"),l("ngClass",e.colorClass),We("aria-valuenow",e.value)}}function Pt(i,t){if(i&1&&(C(0),a(1),x()),i&2){let e=c().$implicit;s(),ie(" New student ",e.student," added by ",e.addedBy," ")}}function Tt(i,t){if(i&1&&(C(0),a(1),x()),i&2){let e=c().$implicit;s(),ie(" New instructor ",e.instructor," added by ",e.addedBy," ")}}function Mt(i,t){if(i&1&&(C(0),a(1),x()),i&2){let e=c().$implicit;s(),ie(" New course ",e.course," added by ",e.addedBy," ")}}function Nt(i,t){if(i&1&&(r(0,"div",78)(1,"div",79)(2,"div",80),p(3,"i",81),n(),r(4,"div")(5,"div",82),u(6,Pt,2,2,"ng-container",83)(7,Tt,2,2,"ng-container",83)(8,Mt,2,2,"ng-container",83),n(),r(9,"div",84),a(10),n()()(),p(11,"i",85),n()),i&2){let e=t.$implicit;s(2),l("ngClass",ve(7,Et,e.type==="student",e.type==="instructor",e.type==="course")),s(),l("ngClass",ve(11,It,e.type==="student",e.type==="instructor",e.type==="course")),s(2),l("ngSwitch",e.type),s(),l("ngSwitchCase","student"),s(),l("ngSwitchCase","instructor"),s(),l("ngSwitchCase","course"),s(2),h(" ",e.time," ")}}var Me=class i{stats={students:0,instructors:0,courses:0,activeEnrollments:0,totalRevenue:0,completedQuizzes:0,averageGrade:0,pendingPayments:0};activityData=[];progressData=[];recentActivities=[];barChartOptions;barChartData;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-dashboard"]],inputs:{stats:"stats",activityData:"activityData",progressData:"progressData",recentActivities:"recentActivities",barChartOptions:"barChartOptions",barChartData:"barChartData"},decls:176,vars:24,consts:[[1,"mb-3"],[1,"card","text-white","border-0","mb-3",2,"background","linear-gradient(90deg, var(--accent-color), var(--secondary-accent))"],[1,"card-body","d-flex","justify-content-between","align-items-center"],[1,"h3","fw-bold","mb-1"],[1,"mb-0","text-light"],[1,"d-none","d-md-block"],[1,"border","border-light","rounded","p-4","text-center","text-light-50"],[1,"card","mb-3"],[1,"card-body"],[1,"card-title","mb-3"],[1,"row","g-3"],[1,"col-12","col-md-5"],[1,"list-group","small"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"col-12","col-md-7"],[1,"d-flex","flex-column","gap-2"],["class","w-100",4,"ngFor","ngForOf"],[1,"row","g-3","mb-3"],[1,"col-12","col-md-6","col-lg-3"],[1,"card","shadow-sm","h-100"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"rounded","bg-accent","text-white","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px"],[1,"bi","bi-people"],[1,"text-muted","mb-1","fw-semibold"],[1,"fw-bold"],[1,"badge","bg-success-subtle","text-success","mt-2"],[1,"rounded","bg-secondary","text-white","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px"],[1,"bi","bi-mortarboard"],[1,"rounded","bg-danger","text-white","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px"],[1,"bi","bi-journal-bookmark"],[1,"rounded","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px"],[1,"bi","bi-cash-coin"],[1,"col-12","col-lg-6"],[1,"card","text-white","h-100","border-0",2,"background","linear-gradient(135deg, #198754, #0f5132)"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"card-title","mb-1"],[1,"small","mb-0","text-light"],[1,"bg-white","bg-opacity-25","rounded","p-2","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-cash-stack","fs-3"],[1,"mb-4"],[1,"display-6","fw-bold","mb-1"],[1,"d-flex","align-items-center"],[1,"bi","bi-graph-up","me-2"],[1,"fw-semibold"],[1,"row","g-2","mt-auto"],[1,"col-4"],[1,"bg-white","bg-opacity-25","rounded","p-2","small","h-100"],[1,"text-light-50"],[1,"fs-5","fw-bold"],[1,"col-12"],[1,"card","text-white","h-100","border-0",2,"background","linear-gradient(135deg, #fd7e14, #e8590c)"],[1,"d-flex","justify-content-between","mb-2"],[1,"bg-white","bg-opacity-25","rounded","p-2","d-inline-flex"],[1,"bi","bi-graph-up","fs-4"],[1,"small","text-light-50","mb-1","fw-semibold"],[1,"badge","bg-white","bg-opacity-25","text-white","rounded-pill"],[1,"col-6"],[1,"card","text-white","h-100","border-0",2,"background","linear-gradient(135deg, #4c6ef5, #364fc7)"],[1,"bi","bi-file-earmark-text","fs-4"],[1,"card","text-white","h-100","border-0",2,"background","linear-gradient(135deg, #f03e3e, #c92a2a)"],[1,"bi","bi-calendar2-week","fs-4"],[1,"text-muted","small","mb-0"],[1,"d-flex","align-items-center","gap-2","small"],[1,"badge","rounded-pill","bg-accent-subtle","text-accent"],[1,"badge","rounded-pill","bg-danger-subtle","text-danger"],[2,"height","320px"],["baseChart","","type","bar",3,"data","options"],[1,"card"],[1,"card-title","mb-0"],[1,"btn","btn-link","btn-sm"],["class","d-flex justify-content-between align-items-center p-2 rounded bg-light",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"me-2","rounded-circle","d-inline-block",2,"width","12px","height","12px",3,"ngClass"],[1,"w-100"],[1,"d-flex","justify-content-between","align-items-center","mb-1","small"],[1,"progress",2,"height","12px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center","p-2","rounded","bg-light"],[1,"d-flex","align-items-center","gap-2"],[1,"rounded","p-2","d-flex","align-items-center","justify-content-center",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"fw-semibold","small",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"text-muted","small"],[1,"bi","bi-chevron-right","text-muted"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),a(5,"Hello, Admin!"),n(),r(6,"p",4),a(7," Welcome to your dashboard. Here's what's happening today. "),n()(),r(8,"div",5)(9,"div",6),a(10,"Admin "),n()()()(),r(11,"div",7)(12,"div",8)(13,"h5",9),a(14,"Course Progress Overview"),n(),r(15,"div",10)(16,"div",11)(17,"ul",12),u(18,At,7,3,"li",13),n()(),r(19,"div",14)(20,"div",15),u(21,wt,8,6,"div",16),n()()()()(),r(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",8)(26,"div",20)(27,"div",21),p(28,"i",22),n()(),r(29,"p",23),a(30,"Total Students"),n(),r(31,"h3",24),a(32),M(33,"number"),n(),r(34,"span",25),a(35," +12% this month "),n()()()(),r(36,"div",18)(37,"div",19)(38,"div",8)(39,"div",20)(40,"div",26),p(41,"i",27),n()(),r(42,"p",23),a(43,"Instructors"),n(),r(44,"h3",24),a(45),n(),r(46,"span",25),a(47," +3 new "),n()()()(),r(48,"div",18)(49,"div",19)(50,"div",8)(51,"div",20)(52,"div",28),p(53,"i",29),n()(),r(54,"p",23),a(55,"Active Courses"),n(),r(56,"h3",24),a(57),n(),r(58,"span",25),a(59," +8 this month "),n()()()(),r(60,"div",18)(61,"div",19)(62,"div",8)(63,"div",20)(64,"div",30),p(65,"i",31),n()(),r(66,"p",23),a(67,"Total Revenue"),n(),r(68,"h3",24),a(69),M(70,"number"),n(),r(71,"span",25),a(72," +18% growth "),n()()()()(),r(73,"div",17)(74,"div",32)(75,"div",33)(76,"div",34)(77,"div",35)(78,"div")(79,"h5",36),a(80,"Total Revenue"),n(),r(81,"p",37),a(82," All-time earnings overview "),n()(),r(83,"div",38),p(84,"i",39),n()(),r(85,"div",40)(86,"h2",41),a(87),M(88,"number"),n(),r(89,"div",42),p(90,"i",43),r(91,"span",44),a(92," +18% growth this month "),n()()(),r(93,"div",45)(94,"div",46)(95,"div",47)(96,"div",48),a(97,"This Month"),n(),r(98,"div",49),a(99,"$8,240"),n()()(),r(100,"div",46)(101,"div",47)(102,"div",48),a(103,"Last Month"),n(),r(104,"div",49),a(105,"$6,980"),n()()(),r(106,"div",46)(107,"div",47)(108,"div",48),a(109,"Pending"),n(),r(110,"div",49),a(111),n()()()()()()(),r(112,"div",32)(113,"div",10)(114,"div",50)(115,"div",51)(116,"div",8)(117,"div",52)(118,"div",53),p(119,"i",54),n()(),r(120,"p",55),a(121," Active Enrollments "),n(),r(122,"h3",24),a(123),M(124,"number"),n(),r(125,"span",56),a(126," +25% increase "),n()()()(),r(127,"div",57)(128,"div",58)(129,"div",8)(130,"div",52)(131,"div",53),p(132,"i",59),n()(),r(133,"p",55),a(134," Completed Quizzes "),n(),r(135,"h3",24),a(136),M(137,"number"),n(),r(138,"span",56),a(139," +15% this week "),n()()()(),r(140,"div",57)(141,"div",60)(142,"div",8)(143,"div",52)(144,"div",53),p(145,"i",61),n()(),r(146,"p",55),a(147," Pending Payments "),n(),r(148,"h3",24),a(149),n(),r(150,"span",56),a(151," Needs attention "),n()()()()()()(),r(152,"div",7)(153,"div",8)(154,"div",35)(155,"div")(156,"h5",36),a(157,"Students vs Courses"),n(),r(158,"p",62),a(159," Live counts from backend (total students & courses) "),n()(),r(160,"div",63)(161,"span",64),a(162,"Students"),n(),r(163,"span",65),a(164,"Courses"),n()()(),r(165,"div",66),p(166,"canvas",67),n()()(),r(167,"div",68)(168,"div",8)(169,"div",35)(170,"h5",69),a(171,"Recent Activities"),n(),r(172,"button",70),a(173,"View All"),n()(),r(174,"div",15),u(175,Nt,12,15,"div",71),n()()()()),e&2&&(s(18),l("ngForOf",o.progressData),s(3),l("ngForOf",o.progressData),s(11),h(" ",D(33,14,o.stats.students)," "),s(13),g(o.stats.instructors),s(12),g(o.stats.courses),s(12),h(" $",D(70,16,o.stats.totalRevenue)," "),s(18),h(" $",D(88,18,o.stats.totalRevenue)," "),s(24),h(" ",o.stats.pendingPayments," "),s(12),h(" ",D(124,20,o.stats.activeEnrollments)," "),s(13),h(" ",D(137,22,o.stats.completedQuizzes)," "),s(13),h(" ",o.stats.pendingPayments," "),s(17),l("data",o.barChartData)("options",o.barChartOptions),s(9),l("ngForOf",o.recentActivities))},dependencies:[_,Z,A,xe,Se,ht,Ee],encapsulation:2})};function Lt(i,t){if(i&1&&(r(0,"option",6),a(1),n()),i&2){let e=t.$implicit;l("value",e.value),s(),h(" ",e.label," ")}}var X=class i{sortOptions=[];initialSortField="";sortChange=new U;selectedField="";sortDirection="asc";ngOnInit(){this.initialSortField?this.selectedField=this.initialSortField:this.sortOptions.length>0&&(this.selectedField=this.sortOptions[0].value)}onFieldChange(){this.emitSortChange()}toggleDirection(){this.sortDirection=this.sortDirection==="asc"?"desc":"asc",this.emitSortChange()}emitSortChange(){this.sortChange.emit({field:this.selectedField,direction:this.sortDirection})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-sorting"]],inputs:{sortOptions:"sortOptions",initialSortField:"initialSortField"},outputs:{sortChange:"sortChange"},decls:7,vars:7,consts:[[1,"sorting-container","d-flex","align-items-center","gap-2"],[1,"sort-label","text-muted","small","fw-semibold"],[1,"form-select","form-select-sm","sort-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-light","btn-sm","sort-btn",3,"click","title"],[1,"bi"],[3,"value"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"label",1),a(2,"Sort By:"),n(),r(3,"select",2),$("ngModelChange",function(m){return B(o.selectedField,m)||(o.selectedField=m),m}),f("change",function(){return o.onFieldChange()}),u(4,Lt,2,2,"option",3),n(),r(5,"button",4),f("click",function(){return o.toggleDirection()}),p(6,"i",5),n()()),e&2&&(s(3),R("ngModel",o.selectedField),s(),l("ngForOf",o.sortOptions),s(),l("title",o.sortDirection==="asc"?"Ascending":"Descending"),s(),ne("bi-sort-alpha-down",o.sortDirection==="asc")("bi-sort-alpha-down-alt",o.sortDirection==="desc"))},dependencies:[_,A,pe,me,ce,de,K,le],styles:[".sorting-container[_ngcontent-%COMP%]{white-space:nowrap}.sort-select[_ngcontent-%COMP%]{width:auto;min-width:140px;border-radius:20px;border-color:#e0e0e0;cursor:pointer}.sort-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color, #0d6efd);box-shadow:0 0 0 .2rem #0d6efd1a}.sort-btn[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:1px solid #e0e0e0;transition:all .2s ease}.sort-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#ced4da}.sort-label[_ngcontent-%COMP%]{margin-right:4px}"]})};var ee=class{static sortData(t,e,o){return!t||t.length===0||!e?t:[...t].sort((d,m)=>{let L=this.resolveField(d,e),q=this.resolveField(m,e),V=0;return typeof L=="string"&&typeof q=="string"?V=L.localeCompare(q):(L<q&&(V=-1),L>q&&(V=1)),o==="asc"?V:-V})}static resolveField(t,e){return e.split(".").reduce((o,d)=>o?o[d]:null,t)}};function Ot(i,t){if(i&1&&(C(0),p(1,"span",22),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.firstName+" "+e.lastName),k)}}function Dt(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;ie("",e.firstName," ",e.lastName)}}function Ft(i,t){if(i&1&&(C(0),p(1,"span",22),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.email),k)}}function kt(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;g(e.email)}}function zt(i,t){if(i&1&&(C(0),p(1,"span",22),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.phoneNumber),k)}}function jt(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;g(e.phoneNumber)}}function Ut(i,t){if(i&1){let e=T();C(0),r(1,"button",23),f("click",function(){y(e);let d=c().$implicit,m=c();return E(m.delete.emit(d))}),p(2,"i",24),n(),x()}}function Vt(i,t){if(i&1){let e=T();r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),u(4,Ot,2,1,"ng-container",17)(5,Dt,1,2,"ng-template",null,0,G),n(),r(7,"td"),u(8,Ft,2,1,"ng-container",17)(9,kt,1,1,"ng-template",null,1,G),n(),r(11,"td"),u(12,zt,2,1,"ng-container",17)(13,jt,1,1,"ng-template",null,2,G),n(),r(15,"td"),a(16),n(),r(17,"td",13)(18,"div",18)(19,"button",19),f("click",function(){let d=y(e).$implicit,m=c();return E(m.goToStudentProfile(d.userId))}),p(20,"i",20),n(),u(21,Ut,3,0,"ng-container",21),n()()()}if(i&2){let e=t.$implicit,o=H(6),d=H(10),m=H(14),L=c();s(2),g(e.id),s(2),l("ngIf",L.searchText)("ngIfElse",o),s(4),l("ngIf",L.searchText)("ngIfElse",d),s(4),l("ngIf",L.searchText)("ngIfElse",m),s(4),g(L.studentEnrollCounts[e.id]||0),s(5),l("ngIf",L.isAdmin)}}var Ne=class i{constructor(t,e){this.authService=t;this.router=e}students=[];studentEnrollCounts={};searchBar;searchText="";delete=new U;sortField="firstName";sortDirection="asc";sortOptions=[{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Email",value:"email"},{label:"Enrollments",value:"id"}];handleSortChange(t){this.sortField=t.field,this.sortDirection=t.direction,this.currentPage=1}currentPage=1;itemsPerPage=10;get paginatedStudents(){let t=this.filteredStudents;t=ee.sortData(t,this.sortField,this.sortDirection);let e=(this.currentPage-1)*this.itemsPerPage;return t.slice(e,e+this.itemsPerPage)}onPageChange(t){this.currentPage=t,window.scrollTo(0,0)}onSearchTextChange(t){this.searchText=t,this.currentPage=1}highlightText(t){return this.searchBar?.highlightText(t)||t}get filteredStudents(){if(!this.searchText.trim())return this.students;let t=this.searchText.toLowerCase();return this.students.filter(e=>e.firstName?.toLowerCase().includes(t)||e.lastName?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.phoneNumber?.toLowerCase().includes(t))}get isAdmin(){return this.authService.isAdmin()}goToStudentProfile(t){t&&(console.log("Student User ID:",t),this.router.navigate(["/student-profile",t]))}static \u0275fac=function(e){return new(e||i)(v(z),v(ae))};static \u0275cmp=b({type:i,selectors:[["app-admin-students"]],viewQuery:function(e,o){if(e&1&&W(j,5),e&2){let d;Y(d=J())&&(o.searchBar=d.first)}},inputs:{students:"students",studentEnrollCounts:"studentEnrollCounts"},outputs:{delete:"delete"},decls:28,vars:7,consts:[["defaultName",""],["defaultEmail",""],["defaultPhone",""],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"mb-0"],[1,"card-body"],[1,"mb-3","d-flex","justify-content-between","align-items-center"],["placeholder","Search students...",3,"searchTextChange","alignRight"],[3,"sortChange","sortOptions","initialSortField"],[1,"table-responsive"],[1,"table","align-middle"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"mt-3"],[3,"pageChange","currentPage","totalItems","itemsPerPage"],[4,"ngIf","ngIfElse"],[1,"d-flex","gap-2","justify-content-end"],["title","View Profile",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-person","text-secondary"],[4,"ngIf"],[3,"innerHTML"],["title","Delete",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(e,o){e&1&&(r(0,"div",3)(1,"div",4)(2,"h5",5),a(3,"Students Management"),n()(),r(4,"div",6)(5,"div",7)(6,"app-search-bar",8),f("searchTextChange",function(m){return o.onSearchTextChange(m)}),n(),r(7,"app-sorting",9),f("sortChange",function(m){return o.handleSortChange(m)}),n()(),r(8,"div",10)(9,"table",11)(10,"thead",12)(11,"tr")(12,"th"),a(13,"ID"),n(),r(14,"th"),a(15,"Full Name"),n(),r(16,"th"),a(17,"Email"),n(),r(18,"th"),a(19,"Phone"),n(),r(20,"th"),a(21,"Enrollment #"),n(),r(22,"th",13),a(23,"Actions"),n()()(),r(24,"tbody"),u(25,Vt,22,9,"tr",14),n()()(),r(26,"div",15)(27,"app-pagination",16),f("pageChange",function(m){return o.onPageChange(m)}),n()()()()),e&2&&(s(6),l("alignRight",!1),s(),l("sortOptions",o.sortOptions)("initialSortField",o.sortField),s(18),l("ngForOf",o.paginatedStudents),s(2),l("currentPage",o.currentPage)("totalItems",o.filteredStudents.length)("itemsPerPage",o.itemsPerPage))},dependencies:[_,A,w,j,ue,X],styles:[".icon-btn-new[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;border:1px solid var(--border-color);background-color:var(--surface-color);box-shadow:0 1px 3px #0000000d;transition:all .15s ease;display:flex;justify-content:center;align-items:center}.icon-btn-new[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:var(--accent-color)}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"]})};function Rt(i,t){if(i&1){let e=T();C(0),r(1,"button",16),f("click",function(){y(e);let d=c();return E(d.goToAdd())}),p(2,"i",17),a(3," Add New "),n(),x()}}function Bt(i,t){if(i&1&&(C(0),p(1,"span",22),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.fullName),k)}}function $t(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;g(e.fullName)}}function qt(i,t){if(i&1){let e=T();C(0),r(1,"button",23),f("click",function(){y(e);let d=c().$implicit,m=c();return E(m.goToEdit(d))}),p(2,"i",24),n(),r(3,"button",25),f("click",function(){y(e);let d=c().$implicit,m=c();return E(m.goToDelete(d))}),p(4,"i",26),n(),x()}}function Qt(i,t){if(i&1){let e=T();r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),u(4,Bt,2,1,"ng-container",18)(5,$t,1,1,"ng-template",null,0,G),n(),r(7,"td"),a(8),n(),r(9,"td"),a(10),n(),r(11,"td"),a(12),n(),r(13,"td",12)(14,"div",19)(15,"button",20),f("click",function(){let d=y(e).$implicit,m=c();return E(m.viewProfile(d))}),p(16,"i",21),n(),u(17,qt,5,0,"ng-container",4),n()()()}if(i&2){let e=t.$implicit,o=H(6),d=c();s(2),g(e.id),s(2),l("ngIf",d.searchText)("ngIfElse",o),s(4),g(e.jobTitle),s(2),g(e.numberOfStudents),s(2),g(e.rating),s(5),l("ngIf",d.isAdmin)}}var Le=class i{constructor(t,e){this.authService=t;this.router=e}instructors=[];searchBar;searchText="";sortField="fullName";sortDirection="asc";sortOptions=[{label:"Name",value:"fullName"},{label:"Rating",value:"rating"},{label:"Job Title",value:"jobTitle"},{label:"Students",value:"numberOfStudents"}];handleSortChange(t){this.sortField=t.field,this.sortDirection=t.direction,this.currentPage=1}currentPage=1;itemsPerPage=10;get paginatedInstructors(){let t=this.filteredInstructors;t=ee.sortData(t,this.sortField,this.sortDirection);let e=(this.currentPage-1)*this.itemsPerPage;return t.slice(e,e+this.itemsPerPage)}onPageChange(t){this.currentPage=t,window.scrollTo(0,0)}onSearchTextChange(t){this.searchText=t,this.currentPage=1}highlightText(t){return this.searchBar?.highlightText(t)||t}get filteredInstructors(){if(!this.searchText.trim())return this.instructors;let t=this.searchText.toLowerCase();return this.instructors.filter(e=>e.fullName?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t))}get isAdmin(){return this.authService.isAdmin()}goToAdd(){this.router.navigate(["/instructors/add"])}viewProfile(t){t.id&&this.router.navigate(["/instructor",t.id,"profile"])}goToEdit(t){t.id&&this.router.navigate(["/instructors/edit",t.id])}goToDelete(t){t.id&&this.router.navigate(["/instructors",t.id,"confirm-delete"])}static \u0275fac=function(e){return new(e||i)(v(z),v(ae))};static \u0275cmp=b({type:i,selectors:[["app-admin-instructors"]],viewQuery:function(e,o){if(e&1&&W(j,5),e&2){let d;Y(d=J())&&(o.searchBar=d.first)}},inputs:{instructors:"instructors"},decls:29,vars:8,consts:[["defaultName",""],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"mb-0"],[4,"ngIf"],[1,"card-body"],[1,"mb-3","text-end","d-flex","justify-content-between","align-items-center"],["placeholder","Search instructors...",3,"searchTextChange","alignRight"],[3,"sortChange","sortOptions","initialSortField"],[1,"table-responsive"],[1,"table","align-middle","table-hover","table-striped"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"mt-3"],[3,"pageChange","currentPage","totalItems","itemsPerPage"],[1,"btn","btn-accent","btn-sm","rounded-pill","px-3",3,"click"],[1,"bi","bi-plus-lg","me-1"],[4,"ngIf","ngIfElse"],[1,"d-flex","gap-2","justify-content-end"],["title","View Profile",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-eye","text-secondary"],[3,"innerHTML"],["title","Edit",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-pencil-square","text-primary"],["title","Delete",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(e,o){e&1&&(r(0,"div",1)(1,"div",2)(2,"h5",3),a(3,"Instructors Management"),n(),u(4,Rt,4,0,"ng-container",4),n(),r(5,"div",5)(6,"div",6)(7,"app-search-bar",7),f("searchTextChange",function(m){return o.onSearchTextChange(m)}),n(),r(8,"app-sorting",8),f("sortChange",function(m){return o.handleSortChange(m)}),n()(),r(9,"div",9)(10,"table",10)(11,"thead",11)(12,"tr")(13,"th"),a(14,"ID"),n(),r(15,"th"),a(16,"Full Name"),n(),r(17,"th"),a(18,"Job Title"),n(),r(19,"th"),a(20,"Students"),n(),r(21,"th"),a(22,"Rating"),n(),r(23,"th",12),a(24,"Actions"),n()()(),r(25,"tbody"),u(26,Qt,18,7,"tr",13),n()()(),r(27,"div",14)(28,"app-pagination",15),f("pageChange",function(m){return o.onPageChange(m)}),n()()()()),e&2&&(s(4),l("ngIf",o.isAdmin),s(3),l("alignRight",!1),s(),l("sortOptions",o.sortOptions)("initialSortField",o.sortField),s(18),l("ngForOf",o.paginatedInstructors),s(2),l("currentPage",o.currentPage)("totalItems",o.filteredInstructors.length)("itemsPerPage",o.itemsPerPage))},dependencies:[_,A,w,j,ue,X],styles:[".icon-btn-new[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;border:1px solid var(--border-color);background-color:var(--surface-color);box-shadow:0 1px 3px #0000000d;transition:all .15s ease;display:flex;justify-content:center;align-items:center}.icon-btn-new[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:var(--accent-color)}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"]})};function Ht(i,t){if(i&1){let e=T();C(0),r(1,"button",17),f("click",function(){y(e);let d=c();return E(d.goToAdd())}),p(2,"i",18),a(3," Add New "),n(),x()}}function Gt(i,t){if(i&1&&(C(0),p(1,"span",23),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.crs_Name),k)}}function Wt(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;g(e.crs_Name)}}function Yt(i,t){if(i&1&&(C(0),p(1,"span",23),x()),i&2){let e=c().$implicit,o=c();s(),l("innerHTML",o.highlightText(e.crs_Description),k)}}function Jt(i,t){if(i&1&&a(0),i&2){let e=c().$implicit;g(e.crs_Description)}}function Zt(i,t){if(i&1){let e=T();C(0),r(1,"button",24),f("click",function(){y(e);let d=c().$implicit,m=c();return E(m.goToEdit(d))}),p(2,"i",25),n(),r(3,"button",26),f("click",function(){y(e);let d=c().$implicit,m=c();return E(m.goToDelete(d))}),p(4,"i",27),n(),x()}}function Kt(i,t){if(i&1){let e=T();r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),u(4,Gt,2,1,"ng-container",19)(5,Wt,1,1,"ng-template",null,0,G),n(),r(7,"td"),a(8),n(),r(9,"td"),a(10),M(11,"currency"),n(),r(12,"td"),u(13,Yt,2,1,"ng-container",19)(14,Jt,1,1,"ng-template",null,1,G),n(),r(16,"td"),a(17),n(),r(18,"td",13)(19,"div",20)(20,"button",21),f("click",function(){let d=y(e).$implicit,m=c();return E(m.viewDetails(d))}),p(21,"i",22),n(),u(22,Zt,5,0,"ng-container",5),n()()()}if(i&2){let e=t.$implicit,o=H(6),d=H(15),m=c();s(2),g(e.crs_Id),s(2),l("ngIf",m.searchText)("ngIfElse",o),s(4),g(e.instructorName),s(2),g(D(11,9,e.price)),s(3),l("ngIf",m.searchText)("ngIfElse",d),s(4),g(m.getCourseEnrollCount(e.crs_Id)),s(5),l("ngIf",m.isAdmin)}}var Oe=class i{constructor(t,e){this.authService=t;this.router=e}courses=[];courseEnrollCounts={};searchBar;searchText="";getCourseEnrollCount(t){return this.courseEnrollCounts[t]??0}sortField="crs_Name";sortDirection="asc";sortOptions=[{label:"Name",value:"crs_Name"},{label:"Price",value:"price"},{label:"Description",value:"crs_Description"}];handleSortChange(t){this.sortField=t.field,this.sortDirection=t.direction,this.currentPage=1}currentPage=1;itemsPerPage=10;get paginatedCourses(){let t=this.filteredCourses;t=ee.sortData(t,this.sortField,this.sortDirection);let e=(this.currentPage-1)*this.itemsPerPage;return t.slice(e,e+this.itemsPerPage)}onPageChange(t){this.currentPage=t,window.scrollTo(0,0)}onSearchTextChange(t){this.searchText=t,this.currentPage=1}highlightText(t){return this.searchBar?.highlightText(t)||t}get filteredCourses(){if(!this.searchText.trim())return this.courses;let t=this.searchText.toLowerCase();return this.courses.filter(e=>e.crs_Name?.toLowerCase().includes(t)||e.crs_Description?.toLowerCase().includes(t))}get isAdmin(){return this.authService.isAdmin()}goToAdd(){this.router.navigate(["/courses/add"])}viewDetails(t){t.crs_Id&&this.router.navigate(["/courses",t.crs_Id,"details"])}goToEdit(t){t.crs_Id&&this.router.navigate(["/courses/edit",t.crs_Id])}goToDelete(t){t.crs_Id&&this.router.navigate(["/Courses/delete",t.crs_Id])}static \u0275fac=function(e){return new(e||i)(v(z),v(ae))};static \u0275cmp=b({type:i,selectors:[["app-admin-courses"]],viewQuery:function(e,o){if(e&1&&W(j,5),e&2){let d;Y(d=J())&&(o.searchBar=d.first)}},inputs:{courses:"courses",courseEnrollCounts:"courseEnrollCounts"},decls:31,vars:8,consts:[["defaultName",""],["defaultDesc",""],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"mb-0"],[4,"ngIf"],[1,"card-body"],[1,"mb-3","d-flex","justify-content-between","align-items-center"],["placeholder","Search courses...",3,"searchTextChange","alignRight"],[3,"sortChange","sortOptions","initialSortField"],[1,"table-responsive"],[1,"table","align-middle","table-hover","table-striped"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"mt-3"],[3,"pageChange","currentPage","totalItems","itemsPerPage"],[1,"btn","btn-accent","btn-sm","rounded-pill","px-3",3,"click"],[1,"bi","bi-plus-lg","me-1"],[4,"ngIf","ngIfElse"],[1,"d-flex","gap-2","justify-content-end"],["title","View Details",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-eye","text-secondary"],[3,"innerHTML"],["title","Edit",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-pencil-square","text-primary"],["title","Delete",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(e,o){e&1&&(r(0,"div",2)(1,"div",3)(2,"h5",4),a(3,"Courses Management"),n(),u(4,Ht,4,0,"ng-container",5),n(),r(5,"div",6)(6,"div",7)(7,"app-search-bar",8),f("searchTextChange",function(m){return o.onSearchTextChange(m)}),n(),r(8,"app-sorting",9),f("sortChange",function(m){return o.handleSortChange(m)}),n()(),r(9,"div",10)(10,"table",11)(11,"thead",12)(12,"tr")(13,"th"),a(14,"ID"),n(),r(15,"th"),a(16,"Title"),n(),r(17,"th"),a(18,"Instructor"),n(),r(19,"th"),a(20,"Price"),n(),r(21,"th"),a(22,"Description"),n(),r(23,"th"),a(24,"Enrollments"),n(),r(25,"th",13),a(26,"Actions"),n()()(),r(27,"tbody"),u(28,Kt,23,11,"tr",14),n()()(),r(29,"div",15)(30,"app-pagination",16),f("pageChange",function(m){return o.onPageChange(m)}),n()()()()),e&2&&(s(4),l("ngIf",o.isAdmin),s(3),l("alignRight",!1),s(),l("sortOptions",o.sortOptions)("initialSortField",o.sortField),s(20),l("ngForOf",o.paginatedCourses),s(2),l("currentPage",o.currentPage)("totalItems",o.filteredCourses.length)("itemsPerPage",o.itemsPerPage))},dependencies:[_,A,w,j,ue,X,oe],styles:[".icon-btn-new[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;border:1px solid var(--border-color);background-color:var(--surface-color);box-shadow:0 1px 3px #0000000d;transition:all .15s ease;display:flex;justify-content:center;align-items:center}.icon-btn-new[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:var(--accent-color)}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"]})};var De=class i{adminName="Admin";stats;getInitials(t){return t?t.split(" ").filter(e=>!!e).map(e=>e[0]).join("").toUpperCase().slice(0,2):"A"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-profile"]],inputs:{adminName:"adminName",stats:"stats"},decls:56,vars:8,consts:[[1,"card","mb-3"],[1,"card-img-top",2,"height","120px","background","linear-gradient(90deg, var(--accent-color), var(--secondary-accent))"],[1,"card-body"],[1,"d-flex","align-items-end",2,"margin-top","-60px"],[1,"rounded-circle","bg-light","border","border-white","shadow","d-flex","align-items-center","justify-content-center","me-3",2,"width","100px","height","100px"],[1,"fs-1","fw-bold","text-secondary"],[1,"mb-3"],[1,"mb-1"],[1,"text-muted"],[1,"row","g-2","mt-2"],[1,"col-12","col-md-4"],[1,"bg-light","rounded","p-2","text-center"],[1,"fw-bold"],[1,"text-muted","small"],[1,"card"],[1,"card-title"],[1,"mt-3"],[1,"row","g-3"],[1,"col-12","col-md-6"],[1,"form-label"],["placeholder","name","type","text",1,"form-control",3,"value"],["placeholder","email","type","email","value","admin@learnzie.com",1,"form-control"],["placeholder","tel","type","tel","value","+1 234 567 8900",1,"form-control"],["placeholder","tel","type","text","value","Super Administrator","disabled","",1,"form-control"],["type","button",1,"btn","btn-accent","mt-3"]],template:function(e,o){e&1&&(P(0,"div",0),Q(1,"div",1),P(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),a(6),I()(),P(7,"div",6)(8,"h4",7),a(9),I(),P(10,"div",8),a(11,"@admin"),I()()(),P(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),a(16),M(17,"number"),I(),P(18,"div",13),a(19," Students Managed "),I()()(),P(20,"div",10)(21,"div",11)(22,"div",12),a(23),I(),P(24,"div",13),a(25," Courses Overseen "),I()()(),P(26,"div",10)(27,"div",11)(28,"div",12),a(29),I(),P(30,"div",13),a(31," Instructors "),I()()()()()(),P(32,"div",14)(33,"div",2)(34,"h5",15),a(35,"Profile Settings"),I(),P(36,"form",16)(37,"div",17)(38,"div",18)(39,"label",19),a(40,"Full Name"),I(),Q(41,"input",20),I(),P(42,"div",18)(43,"label",19),a(44,"Email"),I(),Q(45,"input",21),I(),P(46,"div",18)(47,"label",19),a(48,"Phone"),I(),Q(49,"input",22),I(),P(50,"div",18)(51,"label",19),a(52,"Role"),I(),Q(53,"input",23),I()(),P(54,"button",24),a(55," Save Changes "),I()()()()),e&2&&(s(6),h(" ",o.getInitials(o.adminName)," "),s(3),g(o.adminName),s(7),h(" ",D(17,6,o.stats.students)," "),s(7),h(" ",o.stats.courses," "),s(6),h(" ",o.stats.instructors," "),s(12),Ye("value",o.adminName))},dependencies:[_,Ee],encapsulation:2})};function Xt(i,t){i&1&&(r(0,"div",8),p(1,"div",9),n())}function en(i,t){i&1&&(r(0,"div",10),a(1," No pending instructor registrations at the moment. "),n())}function tn(i,t){if(i&1&&(r(0,"a",21),a(1," View Channel "),n()),i&2){let e=c().$implicit;l("href",e.youtubeChannelUrl,Ge)}}function nn(i,t){if(i&1){let e=T();r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td"),a(6),n(),r(7,"td"),a(8),n(),r(9,"td"),a(10),n(),r(11,"td"),u(12,tn,2,1,"a",16),n(),r(13,"td",14)(14,"button",17),f("click",function(){let d=y(e).$implicit,m=c(2);return E(m.approve.emit(d))}),p(15,"i",18),a(16," Accept "),n(),r(17,"button",19),f("click",function(){let d=y(e).$implicit,m=c(2);return E(m.reject.emit(d))}),p(18,"i",20),a(19," Reject "),n()()()}if(i&2){let e=t.$implicit,o=t.index;s(2),g(o+1),s(2),g(e.fullName),s(2),g(e.email),s(2),g(e.jobTitle),s(2),g(e.phoneNumber),s(2),l("ngIf",e.youtubeChannelUrl)}}function rn(i,t){if(i&1&&(r(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th"),a(5,"#"),n(),r(6,"th"),a(7,"Full Name"),n(),r(8,"th"),a(9,"Email"),n(),r(10,"th"),a(11,"Job Title"),n(),r(12,"th"),a(13,"Phone"),n(),r(14,"th"),a(15,"Youtube"),n(),r(16,"th",14),a(17,"Actions"),n()()(),r(18,"tbody"),u(19,nn,20,6,"tr",15),n()()()),i&2){let e=c();s(19),l("ngForOf",e.pendingInstructors)}}var Fe=class i{pendingInstructors=[];isLoading=!1;approve=new U;reject=new U;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-instructor-requests"]],inputs:{pendingInstructors:"pendingInstructors",isLoading:"isLoading"},outputs:{approve:"approve",reject:"reject"},decls:10,vars:4,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-secondary"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","alert alert-info mb-0",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"alert","alert-info","mb-0"],[1,"table-responsive"],[1,"table","align-middle"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",3,"href",4,"ngIf"],[1,"btn","btn-sm","btn-success","me-1",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-x-lg","me-1"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Instructor Registration Requests"),n(),r(4,"span",3),a(5),n()(),r(6,"div",4),u(7,Xt,2,0,"div",5)(8,en,2,0,"div",6)(9,rn,20,1,"div",7),n()()),e&2&&(s(5),h(" ",o.pendingInstructors.length," pending "),s(2),l("ngIf",o.isLoading),s(),l("ngIf",!o.isLoading&&o.pendingInstructors.length===0),s(),l("ngIf",!o.isLoading&&o.pendingInstructors.length>0))},dependencies:[_,A,w],encapsulation:2})};function on(i,t){i&1&&(r(0,"div",8),p(1,"div",9),n())}function an(i,t){i&1&&(r(0,"div",10),a(1," No enrollments found. "),n())}function sn(i,t){if(i&1&&(r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td"),a(6),n(),r(7,"td"),a(8),n(),r(9,"td",14),a(10),M(11,"currency"),n()()),i&2){let e=t.$implicit,o=t.index;s(2),g(o+1),s(2),g(e.studentName),s(2),g(e.courseName),s(2),g(e.instructorName),s(2),g(D(11,5,e.coursePrice))}}function ln(i,t){if(i&1&&(r(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th"),a(5,"#"),n(),r(6,"th"),a(7,"Student"),n(),r(8,"th"),a(9,"Course"),n(),r(10,"th"),a(11,"Instructor"),n(),r(12,"th",14),a(13,"Price"),n()()(),r(14,"tbody"),u(15,sn,12,7,"tr",15),n()()()),i&2){let e=c();s(15),l("ngForOf",e.enrollments)}}var ke=class i{enrollments=[];isLoading=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-enrollments"]],inputs:{enrollments:"enrollments",isLoading:"isLoading"},decls:10,vars:4,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-secondary"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","alert alert-info mb-0",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"alert","alert-info","mb-0"],[1,"table-responsive"],[1,"table","align-middle","table-hover","table-striped"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Enrollments"),n(),r(4,"span",3),a(5),n()(),r(6,"div",4),u(7,on,2,0,"div",5)(8,an,2,0,"div",6)(9,ln,16,1,"div",7),n()()),e&2&&(s(5),h(" ",o.enrollments.length," total "),s(2),l("ngIf",o.isLoading),s(),l("ngIf",!o.isLoading&&o.enrollments.length===0),s(),l("ngIf",!o.isLoading&&o.enrollments.length>0))},dependencies:[_,A,w,oe],encapsulation:2})};var ge=class i{constructor(t){this.http=t}apiUrl="https://elearningg.runasp.net/api/Admin";getPendingInstructors(){return this.http.get(`${this.apiUrl}/pending-instructors`)}approveInstructor(t){return this.http.post(`${this.apiUrl}/instructors/${t}/approve`,{})}rejectInstructor(t){return this.http.post(`${this.apiUrl}/instructors/${t}/reject`,{})}getAllAdmins(){return this.http.get(`${this.apiUrl}/admins`)}getAdminById(t){return this.http.get(`${this.apiUrl}/admins/${t}`)}createAdmin(t){return this.http.post(`${this.apiUrl}/admins`,t)}updateAdmin(t,e){return this.http.put(`${this.apiUrl}/admins/${t}`,e)}deleteAdmin(t){return this.http.delete(`${this.apiUrl}/admins/${t}`)}getAdminsCount(){return this.http.get(`${this.apiUrl}/admins/count`)}static \u0275fac=function(e){return new(e||i)(Ce(Ie))};static \u0275prov=_e({token:i,factory:i.\u0275fac,providedIn:"root"})};function mn(i,t){if(i&1){let e=T();r(0,"tr")(1,"td")(2,"div",17)(3,"div",18),a(4),n(),p(5,"span",19),n()(),p(6,"td",19),r(7,"td",20)(8,"div",21)(9,"button",22),f("click",function(){let d=y(e).$implicit,m=c();return E(m.openEditModal(d))}),p(10,"i",23),n(),r(11,"button",24),f("click",function(){let d=y(e).$implicit,m=c();return E(m.deleteAdmin(d))}),p(12,"i",25),n()()()()}if(i&2){let e=t.$implicit,o=c();s(4),h(" ",e.userName.charAt(0).toUpperCase()," "),s(),l("innerHTML",o.highlightText(e.userName),k),s(),l("innerHTML",o.highlightText(e.email),k)}}function cn(i,t){i&1&&(r(0,"tr")(1,"td",26),p(2,"i",27),a(3," No admins found matching your search. "),n()())}function pn(i,t){i&1&&(r(0,"tr")(1,"td",26)(2,"div",28)(3,"span",29),a(4,"Loading..."),n()()()())}function un(i,t){i&1&&p(0,"div",30)}function gn(i,t){i&1&&(r(0,"div",50),a(1," User Name is required "),n())}function fn(i,t){i&1&&(r(0,"div",50),a(1," User Name is too long "),n())}function hn(i,t){i&1&&(r(0,"div",50),a(1," User Name can only contain letters, numbers, and spaces "),n())}function vn(i,t){i&1&&(r(0,"div",50),a(1," Email is required "),n())}function bn(i,t){i&1&&(r(0,"div",50),a(1," Invalid email format "),n())}function _n(i,t){i&1&&(r(0,"div",50),a(1," Password is required "),n())}function Cn(i,t){i&1&&(r(0,"div",50),a(1," Password must be at least 6 characters "),n())}function xn(i,t){i&1&&(r(0,"div",51),a(1," Only fill this if you want to change the password. "),n())}function Sn(i,t){i&1&&p(0,"span",52)}function yn(i,t){if(i&1){let e=T();r(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34)(4,"h5",35),a(5),n(),r(6,"button",36),f("click",function(){y(e);let d=c();return E(d.closeModal())}),n()(),r(7,"div",37)(8,"form",38),f("ngSubmit",function(){y(e);let d=c();return E(d.onSubmit())}),r(9,"div",39)(10,"label",40),a(11,"User Name"),n(),p(12,"input",41),u(13,gn,2,0,"div",42)(14,fn,2,0,"div",42)(15,hn,2,0,"div",42),n(),r(16,"div",39)(17,"label",40),a(18,"Email"),n(),p(19,"input",43),u(20,vn,2,0,"div",42)(21,bn,2,0,"div",42),n(),r(22,"div",7)(23,"label",40),a(24,"Password"),n(),p(25,"input",44),u(26,_n,2,0,"div",42)(27,Cn,2,0,"div",42)(28,xn,2,0,"div",45),n(),r(29,"div",46)(30,"button",47),f("click",function(){y(e);let d=c();return E(d.closeModal())}),a(31,"Cancel"),n(),r(32,"button",48),u(33,Sn,1,0,"span",49),a(34),n()()()()()()()}if(i&2){let e,o,d,m,L,q,V,He,$e,qe,S=c();s(5),g(S.isEditMode?"Edit Admin":"Add New Admin"),s(3),l("formGroup",S.adminForm),s(4),ne("is-invalid",S.submitted&&((e=S.adminForm.get("userName"))==null?null:e.errors)),s(),l("ngIf",S.submitted&&((o=S.adminForm.get("userName"))==null||o.errors==null?null:o.errors.required)),s(),l("ngIf",S.submitted&&((d=S.adminForm.get("userName"))==null||d.errors==null?null:d.errors.maxlength)),s(),l("ngIf",S.submitted&&((m=S.adminForm.get("userName"))==null||m.errors==null?null:m.errors.pattern)),s(4),ne("is-invalid",S.submitted&&((L=S.adminForm.get("email"))==null?null:L.errors)),s(),l("ngIf",S.submitted&&((q=S.adminForm.get("email"))==null||q.errors==null?null:q.errors.required)),s(),l("ngIf",S.submitted&&((V=S.adminForm.get("email"))==null||V.errors==null?null:V.errors.email)),s(4),ne("is-invalid",S.submitted&&((He=S.adminForm.get("password"))==null?null:He.errors)),l("placeholder",S.isEditMode?"Leave blank to keep unchanged":""),s(),l("ngIf",S.submitted&&(($e=S.adminForm.get("password"))==null||$e.errors==null?null:$e.errors.required)&&!S.isEditMode),s(),l("ngIf",S.submitted&&((qe=S.adminForm.get("password"))==null||qe.errors==null?null:qe.errors.minlength)),s(),l("ngIf",S.isEditMode),s(4),l("disabled",S.isLoading),s(),l("ngIf",S.isLoading),s(),h(" ",S.isLoading?"Saving...":"Save Changes"," ")}}var ze=class i{constructor(t,e,o){this.adminService=t;this.fb=e;this.snackBar=o;this.adminForm=this.fb.group({userName:["",[te.required,te.maxLength(100)]],email:["",[te.required,te.email]],password:[""]})}admins=[];isLoading=!1;error=null;searchBar;searchText="";showModal=!1;isEditMode=!1;selectedAdminId=null;adminForm;submitted=!1;ngOnInit(){this.loadAdmins()}loadAdmins(){this.isLoading=!0,this.adminService.getAllAdmins().subscribe({next:t=>{this.admins=t,this.isLoading=!1},error:t=>{console.error("Error loading admins",t),this.error="Failed to load admins.",this.isLoading=!1}})}onSearchTextChange(t){this.searchText=t}get filteredAdmins(){if(!this.searchText.trim())return this.admins;let t=this.searchText.toLowerCase();return this.admins.filter(e=>e.userName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t))}highlightText(t){return this.searchBar?.highlightText(t)||t}openAddModal(){this.isEditMode=!1,this.selectedAdminId=null,this.submitted=!1,this.adminForm.reset(),this.adminForm.get("password")?.setValidators([te.required,te.minLength(6)]),this.adminForm.get("password")?.updateValueAndValidity(),this.showModal=!0}openEditModal(t){this.isEditMode=!0,this.selectedAdminId=t.id,this.submitted=!1,this.adminForm.patchValue({userName:t.userName,email:t.email,password:""}),this.adminForm.get("password")?.clearValidators(),this.adminForm.get("password")?.updateValueAndValidity(),this.showModal=!0}closeModal(){this.showModal=!1}onSubmit(){if(this.submitted=!0,this.adminForm.invalid)return;this.isLoading=!0;let t=this.adminForm.value;if(this.isEditMode&&this.selectedAdminId){let e={userName:t.userName,email:t.email};this.adminService.updateAdmin(this.selectedAdminId,e).subscribe({next:()=>{this.loadAdmins(),this.closeModal(),this.isLoading=!1},error:o=>{console.error(o),this.isLoading=!1,this.snackBar.open(o.error?.message||"Failed to update admin","error")}})}else{let e={userName:t.userName,email:t.email,password:t.password};this.adminService.createAdmin(e).subscribe({next:()=>{this.loadAdmins(),this.closeModal(),this.isLoading=!1},error:o=>{console.error(o),this.isLoading=!1,this.snackBar.open(o.error?.message||"Failed to create admin","error")}})}}deleteAdmin(t){confirm(`Are you sure you want to delete admin ${t.userName}?`)&&(this.isLoading=!0,this.adminService.deleteAdmin(t.id).subscribe({next:()=>{this.loadAdmins(),this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1,this.snackBar.open(e.error?.message||"Failed to delete admin","error")}}))}static \u0275fac=function(e){return new(e||i)(v(ge),v(at),v(ct))};static \u0275cmp=b({type:i,selectors:[["app-admin-admins"]],viewQuery:function(e,o){if(e&1&&W(j,5),e&2){let d;Y(d=J())&&(o.searchBar=d.first)}},decls:27,vars:6,consts:[[1,"card","shadow-sm","border-0"],[1,"card-header","d-flex","justify-content-between","align-items-center","py-3"],[1,"mb-0","text-accent","fw-bold"],[1,"bi","bi-shield-lock","me-2"],[1,"btn","btn-accent","btn-sm","rounded-pill","px-3",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"card-body"],[1,"mb-4"],["placeholder","Search by name or email...",3,"searchTextChange","alignRight"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-dark"],[1,"text-end",2,"width","150px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["class","modal fade show d-block","tabindex","-1","role","dialog",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"avatar-circle","bg-accent-subtle","text-accent","me-2"],[3,"innerHTML"],[1,"text-end"],[1,"d-flex","gap-2","justify-content-end"],["title","Edit",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-pencil-square","text-primary"],["title","Delete",1,"icon-btn-new","btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-trash","text-danger"],["colspan","3",1,"text-center","py-5"],[1,"bi","bi-search","display-6","d-block","mb-3"],["role","status",1,"spinner-border","text-accent"],[1,"visually-hidden"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[1,"modal-header"],[1,"modal-title","fw-bold"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["placeholder","User Name","type","text","formControlName","userName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["placeholder","Email","type","email","formControlName","email",1,"form-control"],["placeholder","Password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["class","form-text ",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-accent","px-4",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"form-text"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),p(3,"i",3),a(4,"Admins Management "),n(),r(5,"button",4),f("click",function(){return o.openAddModal()}),p(6,"i",5),a(7," Add New Admin "),n()(),r(8,"div",6)(9,"div",7)(10,"app-search-bar",8),f("searchTextChange",function(m){return o.onSearchTextChange(m)}),n()(),r(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th"),a(16,"User Name"),n(),r(17,"th"),a(18,"Email"),n(),r(19,"th",12),a(20,"Actions"),n()()(),r(21,"tbody"),u(22,mn,13,3,"tr",13)(23,cn,4,0,"tr",14)(24,pn,5,0,"tr",14),n()()()()(),u(25,un,1,0,"div",15)(26,yn,35,20,"div",16)),e&2&&(s(10),l("alignRight",!1),s(12),l("ngForOf",o.filteredAdmins),s(),l("ngIf",o.filteredAdmins.length===0&&!o.isLoading),s(),l("ngIf",o.filteredAdmins.length===0&&o.isLoading),s(),l("ngIf",o.showModal),s(),l("ngIf",o.showModal))},dependencies:[_,A,w,st,it,tt,K,nt,rt,ot,j,dt],styles:[".icon-btn-new[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;border:1px solid var(--border-color);background-color:var(--surface-color);box-shadow:0 1px 3px #0000000d;transition:all .15s ease;display:flex;justify-content:center;align-items:center}.icon-btn-new[_ngcontent-%COMP%]:hover{transform:translateY(-1px);border-color:var(--accent-color)}.avatar-circle[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px}.card[_ngcontent-%COMP%]{border-radius:10px;background-color:var(--background-color);color:var(--default-color);box-shadow:0 4px 12px #0000001a;transition:background-color .3s,color .3s}.card-header[_ngcontent-%COMP%]{background-color:var(--surface-color);border-bottom:1px solid var(--border-color)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:var(--surface-color);color:var(--default-color);border-radius:10px;box-shadow:var(--card-shadow);transition:background-color .3s,color .3s}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color)}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:var(--surface-color);color:var(--default-color);border:1px solid var(--border-color);border-radius:6px}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545}.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .dark-mode[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:var(--surface-color);color:var(--default-color);border-color:var(--border-color)}.dark-mode[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:var(--btn-light-bg);color:var(--default-color);border-color:var(--border-color)}.dark-mode[_ngcontent-%COMP%]   .table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:color-mix(in srgb,var(--surface-color),black 12%)}.dark-mode[_ngcontent-%COMP%]   .table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{color:var(--accent-color)}"]})};function An(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.crs_Id),s(),g(e.crs_Name)}}function wn(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.unit_Id),s(),g(e.unit_Name)}}function Pn(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.lesson_Id),s(),g(e.lesson_Name)}}function Tn(i,t){i&1&&(r(0,"div",20)(1,"div",21)(2,"span",22),a(3,"Loading..."),n()(),r(4,"p",23),a(5,"Loading attendance list..."),n()())}function Mn(i,t){i&1&&(r(0,"div",24),p(1,"i",25),r(2,"p",26),a(3,"No students have checked in for this lesson yet."),n()())}function Nn(i,t){i&1&&(r(0,"div",24),p(1,"i",27),r(2,"p",26),a(3,"Please select a course, unit, and lesson to view attendance."),n()())}function Ln(i,t){if(i&1&&(r(0,"span",38),a(1),M(2,"date"),n()),i&2){let e=c().$implicit;s(),h(" ",re(2,1,e.checkOut,"shortTime")," ")}}function On(i,t){i&1&&(r(0,"span",39),a(1,"-"),n())}function Dn(i,t){if(i&1&&(r(0,"tr")(1,"td"),a(2),n(),r(3,"td",34),a(4),n(),r(5,"td"),a(6),n(),r(7,"td"),a(8),M(9,"date"),n(),r(10,"td")(11,"span",35),a(12),M(13,"date"),n()(),r(14,"td"),u(15,Ln,3,4,"span",36)(16,On,2,0,"span",37),n()()),i&2){let e=t.$implicit;s(2),g(e.studentId),s(2),g(e.fullName),s(2),g(e.email),s(2),g(re(9,7,e.attendanceDate,"mediumDate")),s(4),h(" ",re(13,10,e.checkIn,"shortTime")," "),s(3),l("ngIf",e.checkOut),s(),l("ngIf",!e.checkOut)}}function Fn(i,t){if(i&1&&(r(0,"div",28)(1,"table",29)(2,"thead",30)(3,"tr")(4,"th",31),a(5,"ID"),n(),r(6,"th",31),a(7,"Student Name"),n(),r(8,"th",31),a(9,"Email"),n(),r(10,"th",31),a(11,"Date"),n(),r(12,"th",31),a(13,"Check-In"),n(),r(14,"th",31),a(15,"Check-Out"),n()()(),r(16,"tbody"),u(17,Dn,17,13,"tr",32),n()(),r(18,"div",33),a(19),n()()),i&2){let e=c();s(17),l("ngForOf",e.attendanceList),s(2),h(" Total Present: ",e.attendanceList.length," ")}}var je=class i{constructor(t,e,o,d,m){this.courseService=t;this.unitService=e;this.lessonService=o;this.attendanceService=d;this.authService=m}courses=[];units=[];lessons=[];attendanceList=[];selectedCourseId=null;selectedUnitId=null;selectedLessonId=null;isLoadingCourses=!1;isLoadingUnits=!1;isLoadingLessons=!1;isLoadingAttendance=!1;ngOnInit(){this.loadCourses()}loadCourses(){this.isLoadingCourses=!0,this.courseService.getAllCourses().subscribe({next:t=>{if(console.log("All Courses:",t),console.log("Is Instructor:",this.authService.isInstructor()),console.log("My ID:",this.authService.UserId),this.authService.isInstructor()){let e=this.authService.UserId;console.log("Filtering courses for Instructor ID:",e),e?(this.courses=t.filter(o=>{let d=o.instructorId||o.InstructorId;return console.log(`Course ${o.crs_Name} (${o.crs_Id}) Instructor:`,d),Number(d)===Number(e)}),console.log("Filtered Courses:",this.courses)):(this.courses=[],console.warn("Instructor ID missing, showing no courses."))}else this.courses=t;this.isLoadingCourses=!1},error:t=>{console.error("Error loading courses",t),this.isLoadingCourses=!1}})}onCourseChange(){this.units=[],this.lessons=[],this.attendanceList=[],this.selectedUnitId=null,this.selectedLessonId=null,this.selectedCourseId&&(this.isLoadingUnits=!0,this.unitService.getByCourse(Number(this.selectedCourseId)).subscribe({next:t=>{this.units=t,this.isLoadingUnits=!1},error:t=>{console.error("Error loading units",t),this.isLoadingUnits=!1}}))}onUnitChange(){this.lessons=[],this.attendanceList=[],this.selectedLessonId=null,this.selectedUnitId&&(this.isLoadingLessons=!0,this.lessonService.getLessonsByUnit(Number(this.selectedUnitId)).subscribe({next:t=>{this.lessons=t,this.isLoadingLessons=!1},error:t=>{console.error("Error loading lessons",t),this.isLoadingLessons=!1}}))}onLessonChange(){this.attendanceList=[],this.selectedLessonId&&(this.isLoadingAttendance=!0,this.attendanceService.getAttendanceByLesson(Number(this.selectedLessonId)).subscribe({next:t=>{this.attendanceList=t,this.isLoadingAttendance=!1},error:t=>{console.error("Error loading attendance",t),this.isLoadingAttendance=!1}}))}static \u0275fac=function(e){return new(e||i)(v(se),v(Ae),v(we),v(gt),v(z))};static \u0275cmp=b({type:i,selectors:[["app-admin-attendance"]],decls:33,vars:16,consts:[[1,"card","shadow-sm"],[1,"card-header","bg-white","py-3"],[1,"mb-0","fw-bold"],[1,"bi","bi-calendar-check","text-primary","me-2"],[1,"card-body"],[1,"row","g-3","mb-4"],[1,"col-md-4"],["for","courseSelect",1,"form-label","fw-semibold"],["id","courseSelect",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","selectedUnit",1,"form-label","fw-semibold"],["id","selectedUnit",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],["for","Select Lesson",1,"form-label","fw-semibold"],["id","Select Lesson",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],[1,"my-4"],["class","text-center py-5",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-2"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-people","display-4","mb-3","d-block"],[1,"mb-0"],[1,"bi","bi-cursor","display-6","mb-3","d-block"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"mt-3","text-end","text-muted","small"],[1,"fw-bold"],[1,"badge","bg-success","bg-opacity-10","text-success","border","border-success","px-2","py-1"],["class","badge bg-danger bg-opacity-10 text-danger border border-danger px-2 py-1",4,"ngIf"],["class","text-muted small",4,"ngIf"],[1,"badge","bg-danger","bg-opacity-10","text-danger","border","border-danger","px-2","py-1"],[1,"text-muted","small"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),p(3,"i",3),a(4,"Student Attendance "),n()(),r(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),a(9,"Select Course"),n(),r(10,"select",8),$("ngModelChange",function(m){return B(o.selectedCourseId,m)||(o.selectedCourseId=m),m}),f("change",function(){return o.onCourseChange()}),r(11,"option",9),a(12,"Select a course..."),n(),u(13,An,2,2,"option",10),n()(),r(14,"div",6)(15,"label",11),a(16,"Select Unit"),n(),r(17,"select",12),$("ngModelChange",function(m){return B(o.selectedUnitId,m)||(o.selectedUnitId=m),m}),f("change",function(){return o.onUnitChange()}),r(18,"option",9),a(19,"Select a unit..."),n(),u(20,wn,2,2,"option",10),n()(),r(21,"div",6)(22,"label",13),a(23,"Select Lesson"),n(),r(24,"select",14),$("ngModelChange",function(m){return B(o.selectedLessonId,m)||(o.selectedLessonId=m),m}),f("change",function(){return o.onLessonChange()}),r(25,"option",9),a(26,"Select a lesson..."),n(),u(27,Pn,2,2,"option",10),n()()(),p(28,"hr",15),u(29,Tn,6,0,"div",16)(30,Mn,4,0,"div",17)(31,Nn,4,0,"div",17)(32,Fn,20,2,"div",18),n()()),e&2&&(s(10),R("ngModel",o.selectedCourseId),l("disabled",o.isLoadingCourses),s(),l("ngValue",null),s(2),l("ngForOf",o.courses),s(4),R("ngModel",o.selectedUnitId),l("disabled",!o.selectedCourseId||o.isLoadingUnits),s(),l("ngValue",null),s(2),l("ngForOf",o.units),s(4),R("ngModel",o.selectedLessonId),l("disabled",!o.selectedUnitId||o.isLoadingLessons),s(),l("ngValue",null),s(2),l("ngForOf",o.lessons),s(2),l("ngIf",o.isLoadingAttendance),s(),l("ngIf",!o.isLoadingAttendance&&o.selectedLessonId&&o.attendanceList.length===0),s(),l("ngIf",!o.selectedLessonId),s(),l("ngIf",!o.isLoadingAttendance&&o.attendanceList.length>0))},dependencies:[_,A,w,pe,me,ce,de,K,le,ye],encapsulation:2})};function kn(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.crs_Id),s(),h(" ",e.crs_Name," ")}}function zn(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.unit_Id),s(),h(" ",e.unit_Name," ")}}function jn(i,t){if(i&1&&(r(0,"option",19),a(1),n()),i&2){let e=t.$implicit;l("value",e.lesson_Id),s(),h(" ",e.lesson_Name," ")}}function Un(i,t){i&1&&(r(0,"div",20)(1,"div",21)(2,"span",22),a(3,"Loading..."),n()(),r(4,"p",23),a(5,"Loading quizzes..."),n()())}function Vn(i,t){i&1&&(r(0,"div",24),p(1,"i",25),r(2,"p",26),a(3," Please select a course, unit, and lesson to view quizzes. "),n()())}function Rn(i,t){i&1&&(r(0,"div",24),p(1,"i",27),r(2,"p",26),a(3,"No quizzes created for this lesson yet."),n()())}function Bn(i,t){if(i&1&&(r(0,"tr")(1,"td",31)(2,"span",35),a(3),n()(),r(4,"td")(5,"span",36),a(6),n()(),r(7,"td",37),a(8),n(),r(9,"td",37),a(10),n(),p(11,"td",32),n()),i&2){let e=t.$implicit;s(3),h(" ",e.quiz_Name||"Untitled Quiz"," "),s(3),h(" ",e.lesson_Name||"Lesson #"+e.lesson_Id," "),s(2),h(" ",e.totalMarks," Marks "),s(2),h(" ",e.duration," min ")}}function $n(i,t){if(i&1&&(r(0,"div",28)(1,"table",29)(2,"thead",30)(3,"tr")(4,"th",31),a(5,"Quiz"),n(),r(6,"th"),a(7,"Lesson"),n(),r(8,"th"),a(9,"Total Marks"),n(),r(10,"th"),a(11,"Duration (min)"),n(),r(12,"th",32),a(13,"Actions"),n()()(),r(14,"tbody"),u(15,Bn,12,4,"tr",33),n()(),r(16,"div",34),a(17),n()()),i&2){let e=c();s(15),l("ngForOf",e.quizzes),s(2),h(" Total Quizzes: ",e.quizzes.length," ")}}var Ue=class i{constructor(t,e,o,d,m){this.courseService=t;this.unitService=e;this.lessonService=o;this.quizService=d;this.authService=m}courses=[];units=[];lessons=[];quizzes=[];selectedCourseId=null;selectedUnitId=null;selectedLessonId=null;isLoadingCourses=!1;isLoadingUnits=!1;isLoadingLessons=!1;isLoadingQuizzes=!1;ngOnInit(){this.loadCourses()}loadCourses(){this.isLoadingCourses=!0,this.courseService.getAllCourses().subscribe({next:t=>{if(console.log("All Courses:",t),console.log("Is Instructor:",this.authService.isInstructor()),console.log("My ID:",this.authService.UserId),this.authService.isInstructor()){let e=this.authService.UserId;console.log("Filtering courses for Instructor ID:",e),e?(this.courses=t.filter(o=>{let d=o.instructorId||o.InstructorId;return console.log(`Course ${o.crs_Name} (${o.crs_Id}) Instructor:`,d),Number(d)===Number(e)}),console.log("Filtered Courses:",this.courses)):(this.courses=[],console.warn("Instructor ID missing, showing no courses."))}else this.courses=t;this.isLoadingCourses=!1},error:t=>{console.error("Error loading courses",t),this.isLoadingCourses=!1}})}onCourseChange(){this.units=[],this.lessons=[],this.quizzes=[],this.selectedUnitId=null,this.selectedLessonId=null,this.selectedCourseId&&(this.isLoadingUnits=!0,this.unitService.getByCourse(Number(this.selectedCourseId)).subscribe({next:t=>{this.units=t,this.isLoadingUnits=!1},error:t=>{console.error("Error loading units",t),this.isLoadingUnits=!1}}))}onUnitChange(){this.lessons=[],this.quizzes=[],this.selectedLessonId=null,this.selectedUnitId&&(this.isLoadingLessons=!0,this.lessonService.getLessonsByUnit(Number(this.selectedUnitId)).subscribe({next:t=>{this.lessons=t,this.isLoadingLessons=!1},error:t=>{console.error("Error loading lessons",t),this.isLoadingLessons=!1}}))}onLessonChange(){this.quizzes=[],this.selectedLessonId&&(this.isLoadingQuizzes=!0,this.quizService.getQuizzesByLessonId(Number(this.selectedLessonId)).subscribe({next:t=>{this.quizzes=t,this.isLoadingQuizzes=!1},error:t=>{console.error("Error loading quizzes",t),this.isLoadingQuizzes=!1}}))}static \u0275fac=function(e){return new(e||i)(v(se),v(Ae),v(we),v(ut),v(z))};static \u0275cmp=b({type:i,selectors:[["app-admin-quizzes"]],decls:33,vars:16,consts:[[1,"card","shadow-sm"],[1,"card-header","py-3"],[1,"mb-0","fw-bold"],[1,"bi","bi-file-earmark-text","text-primary","me-2"],[1,"card-body"],[1,"row","g-3","mb-4"],[1,"col-md-4"],["for","courseSelect",1,"form-label","fw-semibold"],["id","courseSelect",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","unitSelect",1,"form-label","fw-semibold"],["id","unitSelect",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],["for","lessonSelect",1,"form-label","fw-semibold"],["id","lessonSelect",1,"form-select",3,"ngModelChange","change","ngModel","disabled"],[1,"my-3"],["class","text-center py-5",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-cursor","display-6","mb-3","d-block"],[1,"mb-0"],[1,"bi","bi-inbox","display-4","mb-3","d-block"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"table-light"],[1,"ps-4"],[1,"text-end","pe-4"],[4,"ngFor","ngForOf"],[1,"mt-3","text-end","text-muted","small"],[1,"fw-semibold","text-dark"],[1,"badge","bg-light","text-dark","border"],[1,"text-muted"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),p(3,"i",3),a(4," Lesson Quizzes "),n()(),r(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),a(9,"Select Course"),n(),r(10,"select",8),$("ngModelChange",function(m){return B(o.selectedCourseId,m)||(o.selectedCourseId=m),m}),f("change",function(){return o.onCourseChange()}),r(11,"option",9),a(12,"Select a course..."),n(),u(13,kn,2,2,"option",10),n()(),r(14,"div",6)(15,"label",11),a(16,"Select Unit"),n(),r(17,"select",12),$("ngModelChange",function(m){return B(o.selectedUnitId,m)||(o.selectedUnitId=m),m}),f("change",function(){return o.onUnitChange()}),r(18,"option",9),a(19,"Select a unit..."),n(),u(20,zn,2,2,"option",10),n()(),r(21,"div",6)(22,"label",13),a(23,"Select Lesson"),n(),r(24,"select",14),$("ngModelChange",function(m){return B(o.selectedLessonId,m)||(o.selectedLessonId=m),m}),f("change",function(){return o.onLessonChange()}),r(25,"option",9),a(26,"Select a lesson..."),n(),u(27,jn,2,2,"option",10),n()()(),p(28,"hr",15),u(29,Un,6,0,"div",16)(30,Vn,4,0,"div",17)(31,Rn,4,0,"div",17)(32,$n,18,2,"div",18),n()()),e&2&&(s(10),R("ngModel",o.selectedCourseId),l("disabled",o.isLoadingCourses),s(),l("ngValue",null),s(2),l("ngForOf",o.courses),s(4),R("ngModel",o.selectedUnitId),l("disabled",!o.selectedCourseId||o.isLoadingUnits),s(),l("ngValue",null),s(2),l("ngForOf",o.units),s(4),R("ngModel",o.selectedLessonId),l("disabled",!o.selectedUnitId||o.isLoadingLessons),s(),l("ngValue",null),s(2),l("ngForOf",o.lessons),s(2),l("ngIf",o.isLoadingQuizzes),s(),l("ngIf",!o.selectedLessonId),s(),l("ngIf",!o.isLoadingQuizzes&&o.selectedLessonId&&o.quizzes.length===0),s(),l("ngIf",!o.isLoadingQuizzes&&o.quizzes.length>0))},dependencies:[_,A,w,pe,me,ce,de,K,le],styles:["[_nghost-%COMP%]{display:block}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:#6c757d;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.95rem;padding-top:1rem;padding-bottom:1rem}"]})};var qn=(i,t)=>({"bg-success":i,"bg-danger":t});function Qn(i,t){i&1&&(r(0,"div",7)(1,"div",8)(2,"span",9),a(3,"Loading..."),n()(),r(4,"p",10),a(5,"Loading grades..."),n()())}function Hn(i,t){i&1&&(r(0,"div",7),p(1,"i",11),r(2,"p",10),a(3,"No grades found."),n()())}function Gn(i,t){if(i&1&&(r(0,"tr")(1,"td",15)(2,"span",18),a(3),n()(),r(4,"td",15)(5,"span",18),a(6),n()(),r(7,"td")(8,"span",19),a(9),n()(),r(10,"td",16)(11,"span",20),a(12),n()()()),i&2){let e=t.$implicit;s(3),g(e.studentName),s(3),g(e.quizName),s(3),g(e.courseName),s(2),l("ngClass",Ke(5,qn,e.value>=50,e.value<50)),s(),h(" ",e.value,"% ")}}function Wn(i,t){if(i&1&&(r(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr")(4,"th",15),a(5,"Student Email"),n(),r(6,"th",15),a(7,"Quiz Name"),n(),r(8,"th"),a(9,"Course"),n(),r(10,"th",16),a(11,"Grade"),n()()(),r(12,"tbody"),u(13,Gn,13,8,"tr",17),n()()()),i&2){let e=c();s(13),l("ngForOf",e.grades)}}var Ve=class i{constructor(t){this.gradesService=t}grades=[];isLoading=!1;ngOnInit(){this.loadGrades()}loadGrades(){this.isLoading=!0,this.gradesService.getAllStudentGrades().subscribe({next:t=>{this.grades=t,this.isLoading=!1},error:t=>{console.error("Error loading grades",t),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||i)(v(ft))};static \u0275cmp=b({type:i,selectors:[["app-admin-grades"]],decls:9,vars:3,consts:[[1,"card","border-0","shadow-sm"],[1,"card-header","py-3"],[1,"card-title","mb-0","fw-bold","text-success"],[1,"bi","bi-award","me-2"],[1,"card-body","p-0"],["class","text-center py-5",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"bi","bi-journal-x","fs-1","text-muted"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"ps-4"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"fw-semibold","text-dark"],[1,"badge","bg-light","text-dark","border"],[1,"badge",3,"ngClass"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),p(3,"i",3),a(4,"Student Grades & Results "),n()(),r(5,"div",4),u(6,Qn,6,0,"div",5)(7,Hn,4,0,"div",5)(8,Wn,14,1,"div",6),n()()),e&2&&(s(6),l("ngIf",o.isLoading),s(),l("ngIf",!o.isLoading&&o.grades.length===0),s(),l("ngIf",!o.isLoading&&o.grades.length>0))},dependencies:[_,Z,A,w],styles:["[_nghost-%COMP%]{display:block}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:#6c757d;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.95rem;padding-top:1rem;padding-bottom:1rem}"]})};var Yn=(i,t,e)=>({"bg-success-subtle text-success":i,"bg-warning-subtle text-warning":t,"bg-danger-subtle text-danger":e});function Jn(i,t){i&1&&(r(0,"div",8),p(1,"div",9),n())}function Zn(i,t){i&1&&(r(0,"div",10),a(1," No payments found. "),n())}function Kn(i,t){if(i&1&&(r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td"),a(6),n(),r(7,"td",14),a(8),M(9,"currency"),n(),r(10,"td"),a(11),M(12,"date"),n(),r(13,"td")(14,"span",16),a(15),n()()()),i&2){let e=t.$implicit,o=t.index;s(2),g(o+1),s(2),g(e.studentName),s(2),g(e.courseName),s(2),g(D(9,7,e.paidAmount)),s(3),g(re(12,9,e.paymentDate,"short")),s(3),l("ngClass",ve(12,Yn,e.paymentStatus.toLowerCase()==="paid",e.paymentStatus.toLowerCase()==="pending",e.paymentStatus.toLowerCase()==="failed")),s(),h(" ",e.paymentStatus," ")}}function Xn(i,t){if(i&1&&(r(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th"),a(5,"#"),n(),r(6,"th"),a(7,"Student"),n(),r(8,"th"),a(9,"Course"),n(),r(10,"th",14),a(11,"Paid Amount"),n(),r(12,"th"),a(13,"Payment Date"),n(),r(14,"th"),a(15,"Status"),n()()(),r(16,"tbody"),u(17,Kn,16,16,"tr",15),n()()()),i&2){let e=c();s(17),l("ngForOf",e.payments)}}var Re=class i{payments=[];isLoading=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-admin-payments"]],inputs:{payments:"payments",isLoading:"isLoading"},decls:10,vars:4,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-secondary"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","alert alert-info mb-0",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"alert","alert-info","mb-0"],[1,"table-responsive"],[1,"table","align-middle"],[1,"table-light"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Payments"),n(),r(4,"span",3),a(5),n()(),r(6,"div",4),u(7,Jn,2,0,"div",5)(8,Zn,2,0,"div",6)(9,Xn,18,1,"div",7),n()()),e&2&&(s(5),h(" ",o.payments.length," records "),s(2),l("ngIf",o.isLoading),s(),l("ngIf",!o.isLoading&&o.payments.length===0),s(),l("ngIf",!o.isLoading&&o.payments.length>0))},dependencies:[_,Z,A,w,oe,ye],encapsulation:2})};var Be=class i{constructor(t){this.http=t}baseUrl=`${Xe.apiBase}/Student`;getCount(){return this.http.get(`${this.baseUrl}/count`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}deleteStudent(t){return this.http.delete(`${this.baseUrl}/${t}`)}static \u0275fac=function(e){return new(e||i)(Ce(Ie))};static \u0275prov=_e({token:i,factory:i.\u0275fac,providedIn:"root"})};function ti(i,t){if(i&1&&p(0,"app-admin-dashboard",11),i&2){let e=c(2);l("stats",e.stats)("activityData",e.activityData)("progressData",e.progressData)("recentActivities",e.recentActivities)("barChartOptions",e.barChartOptions)("barChartData",e.barChartData)}}function ni(i,t){if(i&1&&(C(0),u(1,ti,1,6,"app-admin-dashboard",10),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}function ii(i,t){i&1&&p(0,"app-admin-admins")}function ri(i,t){if(i&1&&(C(0),u(1,ii,1,0,"app-admin-admins",12),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}function oi(i,t){if(i&1){let e=T();r(0,"app-admin-students",13),f("delete",function(d){y(e);let m=c();return E(m.onDeleteStudent(d))}),n()}if(i&2){let e=c();l("students",e.students)("studentEnrollCounts",e.studentEnrollCounts)}}function ai(i,t){if(i&1&&p(0,"app-admin-instructors",14),i&2){let e=c();l("instructors",e.instructors)}}function si(i,t){if(i&1&&p(0,"app-admin-courses",15),i&2){let e=c();l("courses",e.courses)("courseEnrollCounts",e.courseEnrollCounts)}}function li(i,t){if(i&1&&p(0,"app-admin-enrollments",17),i&2){let e=c(2);l("enrollments",e.enrollments)("isLoading",e.isLoadingEnrollments)}}function di(i,t){if(i&1&&(C(0),u(1,li,1,2,"app-admin-enrollments",16),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}function mi(i,t){if(i&1&&p(0,"app-admin-payments",19),i&2){let e=c(2);l("payments",e.payments)("isLoading",e.isLoadingPayments)}}function ci(i,t){if(i&1&&(C(0),u(1,mi,1,2,"app-admin-payments",18),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}function pi(i,t){if(i&1){let e=T();r(0,"app-admin-instructor-requests",21),f("approve",function(d){y(e);let m=c(2);return E(m.onApproveInstructor(d))})("reject",function(d){y(e);let m=c(2);return E(m.onRejectInstructor(d))}),n()}if(i&2){let e=c(2);l("pendingInstructors",e.pendingInstructors)("isLoading",e.isLoadingPending)}}function ui(i,t){if(i&1&&(C(0),u(1,pi,1,2,"app-admin-instructor-requests",20),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}function gi(i,t){i&1&&(C(0),p(1,"app-admin-quizzes"),x())}function fi(i,t){i&1&&(C(0),p(1,"app-admin-grades"),x())}function hi(i,t){i&1&&p(0,"app-admin-attendance")}function vi(i,t){if(i&1&&(C(0),u(1,hi,1,0,"app-admin-attendance",12),x()),i&2){let e=c();s(),l("ngIf",e.isInstructor)}}function bi(i,t){i&1&&p(0,"app-admin-profile")}function _i(i,t){if(i&1&&(C(0),u(1,bi,1,0,"app-admin-profile",12),x()),i&2){let e=c();s(),l("ngIf",e.isAdmin)}}var Ct=class i{constructor(t,e,o,d,m,L,q,V){this.studentService=t;this.instructorService=e;this.courseService=o;this.enrollmentService=d;this.adminService=m;this.authService=L;this.studentProfileService=q;this.snackBar=V}sidebarOpen=!0;activePage="dashboard";adminName="";stats={students:0,instructors:0,courses:0,activeEnrollments:0,totalRevenue:0,completedQuizzes:2341,averageGrade:85.4,pendingPayments:12};students=[];instructors=[];courses=[];recentActivities=[];courseEnrollCounts={};studentEnrollCounts={};pendingInstructors=[];isLoadingPending=!1;payments=[];isLoadingPayments=!1;enrollments=[];isLoadingEnrollments=!1;activityData=[{day:"Mon",students:45,courses:12},{day:"Tue",students:52,courses:15},{day:"Wed",students:48,courses:18},{day:"Thu",students:61,courses:20},{day:"Fri",students:55,courses:16},{day:"Sat",students:38,courses:10},{day:"Sun",students:42,courses:14}];progressData=[{name:"Completed",value:43,colorClass:"bg-primary"},{name:"In Progress",value:32,colorClass:"bg-danger"},{name:"Not Started",value:25,colorClass:"bg-warning"}];menuItems=[];allMenuItems=[{id:"dashboard",label:"Dashboard",iconClass:"bi-speedometer2"},{id:"admins",label:"Admins",iconClass:"bi-shield-lock"},{id:"students",label:"Students",iconClass:"bi-people"},{id:"instructors",label:"Instructors",iconClass:"bi-mortarboard"},{id:"courses",label:"Courses",iconClass:"bi-journal-bookmark"},{id:"enrollments",label:"Enrollments",iconClass:"bi-graph-up"},{id:"quizzes",label:"Quizzes",iconClass:"bi-file-earmark-text"},{id:"payments",label:"Payments",iconClass:"bi-cash-coin"},{id:"grades",label:"Grades & Results",iconClass:"bi-award"},{id:"attendance",label:"Student Attendance",iconClass:"bi-calendar-check"},{id:"instructorRequests",label:"Instructor Requests",iconClass:"bi-person-check"},{id:"profile",label:"Profile",iconClass:"bi-gear"}];barChartOptions={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{},y:{beginAtZero:!0}}};barChartData={labels:["Students","Courses"],datasets:[{data:[0,0],label:"Count",backgroundColor:["rgba(13,110,253,0.7)","rgba(220,53,69,0.7)"]}]};get isInstructor(){return this.authService.isInstructor()}get isAdmin(){return this.authService.isAdmin()}ngOnInit(){this.loadAdminName(),this.filterMenuItems(),this.loadCounts(),this.loadTables(),this.loadPendingInstructors()}filterMenuItems(){if(this.isAdmin)this.menuItems=this.allMenuItems.filter(t=>t.id!=="attendance");else if(this.isInstructor){let t=["courses","students","instructors","quizzes","grades","attendance"];this.menuItems=this.allMenuItems.filter(e=>t.includes(e.id)),t.includes(this.activePage)||(this.activePage=t[0])}else this.menuItems=this.allMenuItems.filter(t=>t.id==="profile"),this.activePage="profile"}loadAdminName(){this.instructorService.getMyProfile().subscribe({next:t=>{this.adminName=t.fullName||"Admin"},error:t=>{console.error("Error getting admin name",t),this.adminName="Admin"}})}loadCounts(){this.studentService.getCount().subscribe({next:t=>{this.stats.students=t.totalStudents,this.updateBarChart()},error:t=>console.error("Error getting students count",t)}),this.instructorService.getCount().subscribe({next:t=>{this.stats.instructors=t.totalInstructors},error:t=>console.error("Error getting instructors count",t)}),this.courseService.getCount().subscribe({next:t=>{this.stats.courses=t.totalCourses,this.updateBarChart()},error:t=>console.error("Error getting courses count",t)}),this.enrollmentService.getTotalRevenue().subscribe({next:t=>this.stats.totalRevenue=t,error:t=>console.error("Error getting total revenue",t)})}updateBarChart(){this.barChartData={labels:["Students","Courses"],datasets:[{data:[this.stats.students,this.stats.courses],label:"Count",backgroundColor:["rgba(13,110,253,0.7)","rgba(220,53,69,0.7)"]}]}}loadTables(){this.studentService.getAll().subscribe({next:t=>{this.students=t.data,this.buildRecentActivities(),this.loadStudentEnrollmentCounts(),this.loadAllEnrollments(),this.loadPayments()},error:t=>console.error("Error loading students",t)}),this.instructorService.getAll().subscribe({next:t=>{this.instructors=t,this.buildRecentActivities()},error:t=>console.error("Error loading instructors",t)}),this.courseService.getAllCourses().subscribe({next:t=>{this.courses=t,this.buildRecentActivities(),this.loadCourseEnrollmentCounts()},error:t=>console.error("Error loading courses",t)})}loadStudentEnrollmentCounts(){if(!this.students||this.students.length===0)return;let t=this.students.map(e=>this.enrollmentService.getStudentCourses(e.id).pipe(fe(o=>({studentId:e.id,count:o.length}))));he(t).subscribe({next:e=>{this.studentEnrollCounts={},e.forEach(o=>{this.studentEnrollCounts[o.studentId]=o.count})},error:e=>console.error("Error loading student enroll counts",e)})}loadCourseEnrollmentCounts(){if(!this.courses||this.courses.length===0)return;let t=this.courses.map(e=>this.enrollmentService.getCourseEnrollmentCount(e.crs_Id).pipe(fe(o=>({courseId:e.crs_Id,count:o}))));he(t).subscribe({next:e=>{this.courseEnrollCounts={};let o=0;e.forEach(m=>{this.courseEnrollCounts[m.courseId]=m.count,o+=m.count}),this.stats.activeEnrollments=o;let d=0;this.courses.forEach(m=>{let L=this.courseEnrollCounts[m.crs_Id]||0;d+=L*m.price}),this.stats.totalRevenue=d},error:e=>console.error("Error loading enrollments per course",e)})}loadAllEnrollments(){if(!this.students||this.students.length===0){this.enrollments=[];return}this.isLoadingEnrollments=!0;let t=this.students.map(e=>this.enrollmentService.getStudentCourses(e.id).pipe(fe(o=>{let d=`${e.firstName} ${e.lastName}`;return o.map(m=>({studentName:d,courseName:m.crs_Name,coursePrice:m.price,instructorName:m.instructorName}))})));he(t).subscribe({next:e=>{this.enrollments=e.flat(),this.isLoadingEnrollments=!1},error:e=>{console.error("Error loading enrollments",e),this.isLoadingEnrollments=!1}})}loadPendingInstructors(){this.isLoadingPending=!0,this.adminService.getPendingInstructors().subscribe({next:t=>{this.pendingInstructors=t,this.isLoadingPending=!1},error:t=>{console.error("Error loading pending instructors",t),this.isLoadingPending=!1}})}buildRecentActivities(){let t=[],e=1;if(this.instructors.length>0){let o=this.instructors[this.instructors.length-1];t.push({id:e++,type:"instructor",instructor:o.fullName,addedBy:this.adminName||"Admin",time:"Recently"})}if(this.students.length>0){let o=this.students[this.students.length-1];t.push({id:e++,type:"student",student:`${o.firstName} ${o.lastName}`,addedBy:this.adminName||"Admin",time:"Recently"})}if(this.courses.length>0){let o=this.courses[this.courses.length-1];t.push({id:e++,type:"course",course:o.crs_Name,addedBy:this.adminName||"Admin",time:"Recently"})}this.recentActivities=t}loadPayments(){if(!this.courses||this.courses.length===0){this.payments=[];return}this.isLoadingPayments=!0;let t=this.courses.map(e=>this.enrollmentService.getCoursePayments(e.crs_Id).pipe(fe(o=>Array.isArray(o)?o.map(d=>({studentName:d.studentName,courseName:d.courseName,paidAmount:d.paidAmount??d.coursePrice,paymentDate:d.paymentDate??d.enrollDate,paymentStatus:d.paymentStatus})):[])));he(t).subscribe({next:e=>{this.payments=e.flat(),this.isLoadingPayments=!1},error:e=>{console.error("Error loading payments",e),this.isLoadingPayments=!1}})}setActivePage(t){this.activePage=t}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}onAddStudent(){}onViewStudent(t){}onEditStudent(t){}onDeleteStudent(t){if(!t.userId){console.error("Student userId is missing"),this.showErrorMessage("Cannot delete student: User ID is missing");return}confirm(`Are you sure you want to delete ${t.firstName} ${t.lastName}? This action cannot be undone.`)&&this.studentProfileService.deleteStudent(t.userId).subscribe({next:o=>{console.log("Student deleted successfully:",o),this.students=this.students.filter(d=>d.userId!==t.userId),this.loadCounts(),this.loadStudentEnrollmentCounts(),this.loadAllEnrollments(),this.buildRecentActivities(),this.showSuccessMessage("Student deleted successfully")},error:o=>{console.error("Error deleting student:",o),this.showErrorMessage("Failed to delete student. Please try again.")}})}onAddInstructor(){}onViewInstructor(t){}onEditInstructor(t){}onDeleteInstructor(t){}onAddCourse(){}onViewCourse(t){}onEditCourse(t){}onDeleteCourse(t){}onApproveInstructor(t){t.id&&this.adminService.approveInstructor(t.id).subscribe({next:()=>this.loadPendingInstructors(),error:e=>console.error("Error approving instructor",e)})}onRejectInstructor(t){t.id&&this.adminService.rejectInstructor(t.id).subscribe({next:()=>this.loadPendingInstructors(),error:e=>console.error("Error rejecting instructor",e)})}showSuccessMessage(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["snackbar-success"],horizontalPosition:"end",verticalPosition:"top"})}showErrorMessage(t){this.snackBar.open(t,"Close",{duration:5e3,panelClass:["snackbar-error"],horizontalPosition:"end",verticalPosition:"top"})}static \u0275fac=function(e){return new(e||i)(v(Be),v(et),v(se),v(pt),v(ge),v(z),v(mt),v(lt))};static \u0275cmp=b({type:i,selectors:[["app-admin-panel"]],decls:18,vars:17,consts:[[1,"d-flex","vh-100"],[3,"pageChange","sidebarOpen","menuItems","activePage"],[1,"grow","d-flex","flex-column","overflow-hidden"],[3,"toggleSidebar","adminName"],[1,"grow","overflow-auto","p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"students","studentEnrollCounts","delete",4,"ngSwitchCase"],[3,"instructors",4,"ngSwitchCase"],[3,"courses","courseEnrollCounts",4,"ngSwitchCase"],[3,"stats","activityData","progressData","recentActivities","barChartOptions","barChartData",4,"ngIf"],[3,"stats","activityData","progressData","recentActivities","barChartOptions","barChartData"],[4,"ngIf"],[3,"delete","students","studentEnrollCounts"],[3,"instructors"],[3,"courses","courseEnrollCounts"],[3,"enrollments","isLoading",4,"ngIf"],[3,"enrollments","isLoading"],[3,"payments","isLoading",4,"ngIf"],[3,"payments","isLoading"],[3,"pendingInstructors","isLoading","approve","reject",4,"ngIf"],[3,"approve","reject","pendingInstructors","isLoading"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-admin-sidebar",1),f("pageChange",function(m){return o.setActivePage(m)}),n(),r(2,"div",2)(3,"app-admin-header",3),f("toggleSidebar",function(){return o.toggleSidebar()}),n(),r(4,"main",4),C(5,5),u(6,ni,2,1,"ng-container",6)(7,ri,2,1,"ng-container",6)(8,oi,1,2,"app-admin-students",7)(9,ai,1,1,"app-admin-instructors",8)(10,si,1,2,"app-admin-courses",9)(11,di,2,1,"ng-container",6)(12,ci,2,1,"ng-container",6)(13,ui,2,1,"ng-container",6)(14,gi,2,0,"ng-container",6)(15,fi,2,0,"ng-container",6)(16,vi,2,1,"ng-container",6)(17,_i,2,1,"ng-container",6),x(),n()()()),e&2&&(s(),l("sidebarOpen",o.sidebarOpen)("menuItems",o.menuItems)("activePage",o.activePage),s(2),l("adminName",o.adminName),s(2),l("ngSwitch",o.activePage),s(),l("ngSwitchCase","dashboard"),s(),l("ngSwitchCase","admins"),s(),l("ngSwitchCase","students"),s(),l("ngSwitchCase","instructors"),s(),l("ngSwitchCase","courses"),s(),l("ngSwitchCase","enrollments"),s(),l("ngSwitchCase","payments"),s(),l("ngSwitchCase","instructorRequests"),s(),l("ngSwitchCase","quizzes"),s(),l("ngSwitchCase","grades"),s(),l("ngSwitchCase","attendance"),s(),l("ngSwitchCase","profile"))},dependencies:[_,w,xe,Se,Pe,Te,Me,Ne,Le,Oe,Fe,De,ke,Re,je,ze,Ue,Ve],styles:[".grow[_ngcontent-%COMP%]{flex-grow:1}"]})};export{Ct as AdminPanelComponent};
