<div class="page">
  <!-- Sidebar -->
  <div
    class="sidebar"
    [ngStyle]="{ width: sidebarOpen ? '280px' : '0' }"
  >
    <div class="sidebar-inner">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          üéì
        </div>
        <h2>Admin Panel</h2>
      </div>

      <nav class="sidebar-nav">
        <!-- Dashboard -->
        <button
          class="sidebar-nav-btn"
          [class.active]="activeView === 'dashboard'"
          (click)="setActiveView('dashboard')"
        >
          Dashboard
        </button>

        <!-- COURSES DROPDOWN -->
        <details class="sidebar-details">
          <summary class="sidebar-summary">Courses</summary>
          <div class="sidebar-submenu">
            <!-- ŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ÿßŸÑŸÉŸàÿ±ÿ≥ÿßÿ™ ÿßŸÑÿπÿßÿØŸäÿ© -->
            <button
              class="sidebar-sub-btn"
              [routerLink]="['/Courses']"
            >
              Go to Courses Page
            </button>

            <!-- ŸÅÿ™ÿ≠ View ÿ≠ÿ∞ŸÅ ÿßŸÑŸÉŸàÿ±ÿ≥ÿßÿ™ ÿ¨ŸàŸá ÿµŸÅÿ≠ÿ© ÿßŸÑÿ£ÿØŸÖŸÜ -->
            <button
              class="sidebar-sub-btn"
              (click)="setActiveView('deleteCourse')"
            >
              Delete Courses (Admin)
            </button>

            <!-- ŸÑŸà ÿ≠ÿßÿ®ÿ® ÿ™ÿ∂ŸäŸÅ View ÿ™ÿßŸÜŸä ŸÑŸÑÿπÿ±ÿ∂ -->
            <button
              class="sidebar-sub-btn"
              (click)="setActiveView('viewCourses')"
            >
              View Courses (Admin)
            </button>
          </div>
        </details>

        <!-- INSTRUCTORS DROPDOWN -->
        <details class="sidebar-details">
          <summary class="sidebar-summary">Instructors</summary>
          <div class="sidebar-submenu">
            <!-- ÿ≤Ÿä ÿßŸÑŸÉŸàÿ±ÿ≥ÿßÿ™: ÿ≤ÿ±ÿßÿ± ŸäŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ÿßŸÑÿ•ŸÜÿ≥ÿ™ÿ±ÿßŸÉÿ™Ÿàÿ±ÿ≤ -->
            <button
              class="sidebar-sub-btn"
              [routerLink]="['/instructors']"
            >
              Go to Instructors Page
            </button>

            <!-- ÿ≥Ÿäÿ® ÿßŸÑÿ≠ÿ∞ŸÅ ÿ≤Ÿä ŸÖÿß ŸáŸà -->
            <button
              class="sidebar-sub-btn"
              (click)="setActiveView('deleteInstructor')"
            >
              Delete Instructors (Admin)
            </button>

            <!-- View ÿ¨ŸàŸá ÿßŸÑÿ£ÿØŸÖŸÜ -->
            <button
              class="sidebar-sub-btn"
              (click)="setActiveView('viewInstructors')"
            >
              View Instructors (Admin)
            </button>
          </div>
        </details>

        <!-- STUDENTS DROPDOWN -->
        <details class="sidebar-details">
          <summary class="sidebar-summary">Students</summary>
          <div class="sidebar-submenu">
            <button class="sidebar-sub-btn" (click)="setActiveView('createStudent')">
              + Create Student
            </button>
            <button class="sidebar-sub-btn" (click)="setActiveView('deleteStudent')">
              Delete Student
            </button>
            <button class="sidebar-sub-btn" (click)="setActiveView('viewStudents')">
              View All Students
            </button>
          </div>
        </details>

        <!-- QUIZZES -->
        <button
          class="sidebar-nav-btn"
          [class.active]="activeView === 'viewQuizzes'"
          (click)="setActiveView('viewQuizzes')"
        >
          View All Quizzes
        </button>
      </nav>
    </div>
  </div>

  <!-- Main Content -->
  <div
    class="main"
    [ngStyle]="{ marginLeft: sidebarOpen ? '280px' : '0' }"
  >
    <button
      class="toggle-btn"
      (click)="toggleSidebar()"
      [ngStyle]="{ left: sidebarOpen ? '260px' : '20px' }"
    >
      <span *ngIf="sidebarOpen">‚úñ</span>
      <span *ngIf="!sidebarOpen">‚ò∞</span>
    </button>

    <div class="main-inner">
      <!-- DASHBOARD -->
      <div *ngIf="activeView === 'dashboard'">
        <h1 class="page-title">Dashboard Overview</h1>

        <div class="stats-grid">
          <div class="stat-card card">
            <div class="stat-icon">üë•</div>
            <h3 class="stat-title">Total Students</h3>
            <p class="stat-value">{{ totalStudents }}</p>
          </div>

          <div class="stat-card card">
            <div class="stat-icon">üìö</div>
            <h3 class="stat-title">Total Instructors</h3>
            <p class="stat-value">{{ totalInstructors }}</p>
          </div>

          <div class="stat-card card">
            <div class="stat-icon">üéì</div>
            <h3 class="stat-title">Total Courses</h3>
            <p class="stat-value">{{ totalCourses }}</p>
          </div>

          <div class="stat-card card">
            <div class="stat-icon">‚úÖ</div>
            <h3 class="stat-title">Enrolled Students</h3>
            <p class="stat-value">{{ enrolledStudents }}</p>
          </div>

          <div class="stat-card card">
            <div class="stat-icon">‚ö†Ô∏è</div>
            <h3 class="stat-title">Non-Enrolled</h3>
            <p class="stat-value">{{ nonEnrolledStudents }}</p>
          </div>
        </div>
      </div>

      <!-- DELETE COURSES (ADMIN VIEW) -->
      <div *ngIf="activeView === 'deleteCourse'" class="card list-card">
        <h2 class="form-title">Delete Courses</h2>

        <div
          *ngFor="let item of courses"
          class="list-item"
        >
          <span class="list-item-name">{{ item.crs_Name }}</span>
          <button
            class="danger-btn"
            (click)="handleDelete(item.crs_Id, 'course')"
          >
            Delete
          </button>
        </div>
      </div>

      <!-- VIEW COURSES (ADMIN VIEW TABLE ÿ®ÿ≥Ÿäÿ∑) -->
      <div *ngIf="activeView === 'viewCourses'" class="card table-card">
        <h2 class="form-title">All Courses (Admin View)</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Course Name</th>
                <th>Instructor</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let c of courses">
                <td>{{ c.crs_Name }}</td>
                <td>{{ c.instructorName }}</td>
                <td>{{ c.price }} EGP</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- DELETE INSTRUCTORS -->
      <div *ngIf="activeView === 'deleteInstructor'" class="card list-card">
        <h2 class="form-title">Delete Instructor</h2>

        <div
          *ngFor="let item of instructors"
          class="list-item"
        >
          <span class="list-item-name">{{ item.fullName }}</span>
          <button
            class="danger-btn"
            (click)="handleDelete(item.id!, 'instructor')"
          >
            Delete
          </button>
        </div>
      </div>

      <!-- VIEW INSTRUCTORS (ADMIN VIEW) -->
      <div *ngIf="activeView === 'viewInstructors'" class="card table-card">
        <h2 class="form-title">All Instructors (Admin View)</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Job Title</th>
                <th>Students</th>
                <th>Rating</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let i of instructors">
                <td>{{ i.fullName }}</td>
                <td>{{ i.jobTitle }}</td>
                <td>{{ i.numberOfStudents }}</td>
                <td>{{ i.rating }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- CREATE STUDENT -->
      <div *ngIf="activeView === 'createStudent'" class="card form-card">
        <h2 class="form-title">Create New Student</h2>

        <div class="form-group">
          <label>Student Name</label>
          <input placeholder="getStudentFullName"
            type="text"
            [(ngModel)]="formData.name"
          />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input placeholder="Email"
            type="email"
            [(ngModel)]="formData.email"
          />
        </div>

        <button class="primary-btn" (click)="handleCreate('student')">
          Create
        </button>
      </div>

      <!-- DELETE STUDENT -->
      <div *ngIf="activeView === 'deleteStudent'" class="card list-card">
        <h2 class="form-title">Delete Student</h2>

        <div
          *ngFor="let item of students"
          class="list-item"
        >
          <span class="list-item-name">{{ getStudentFullName(item) }}</span>
          <button
            class="danger-btn"
            (click)="handleDelete(item.id, 'student')"
          >
            Delete
          </button>
        </div>
      </div>

      <!-- VIEW STUDENTS -->
      <div *ngIf="activeView === 'viewStudents'" class="card table-card">
        <h2 class="form-title">All Students</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Full Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>City</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let s of students">
                <td>{{ getStudentFullName(s) }}</td>
                <td>{{ s.email }}</td>
                <td>{{ s.phoneNumber }}</td>
                <td>{{ s.city }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- VIEW QUIZZES -->
      <div *ngIf="activeView === 'viewQuizzes'" class="card table-card">
        <h2 class="form-title">All Quizzes</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Quiz Title</th>
                <th>Course</th>
                <th>Questions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let q of quizzes">
                <td>{{ q.title }}</td>
                <td>{{ q.course }}</td>
                <td>{{ q.questions }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>
