 <section class="instructor-profile section" *ngIf="instructor as ins">

  <div class="container">

    <!-- Hero Banner -->
    <div class="instructor-hero-banner">
      <div class="hero-background">
        <!-- تقدر تغيّر الصورة دي لأي BG عندك -->
        <img src="assets/img/education/showcase-4.webp" alt="Background" class="img-fluid">
        <div class="hero-overlay"></div>
      </div>

      <div class="hero-content">
        <!-- Avatar -->
        <div class="instructor-avatar">
          <img [src]="ins.photoUrl" alt="Instructor" class="img-fluid">
          <div class="status-badge">
            <i class="bi bi-patch-check-fill"></i>
            <span>Verified</span>
          </div>
        </div>

        <!-- Info -->
        <div class="instructor-info">
          <h2>{{ ins.fullName }}</h2>
          <p class="title">{{ ins.jobTitle }}</p>

          <div class="credentials">
            <span class="credential">{{ ins.numberOfStudents }} Students</span>
            <span class="credential">Rating {{ ins.rating }}</span>
          </div>

          <div class="rating-overview">
            <div class="stars">
              <ng-container *ngFor="let star of getStarsArray(ins.rating)">
                <i class="bi"
                   [ngClass]="{
                     'bi-star-fill': star <= ins.rating,
                     'bi-star': star > ins.rating
                   }"></i>
              </ng-container>
            </div>
            <span class="rating-text">{{ ins.rating }} / 5</span>
          </div>

          <div class="contact-actions">
            <a *ngIf="ins.email" [href]="'mailto:' + ins.email" class="btn-contact">
              <i class="bi bi-envelope"></i>
              Contact Instructor
            </a>
            <div class="social-media">
              <a *ngIf="ins.youtubeChannelUrl" [href]="ins.youtubeChannelUrl" target="_blank">
                <i class="bi bi-youtube"></i>
              </a>
              <a [href]="'tel:' + ins.phoneNumber">
                <i class="bi bi-telephone"></i>
              </a>
              <a *ngIf="ins.certificateUrl" [href]="ins.certificateUrl" target="_blank">
                <i class="bi bi-patch-check"></i>
              </a>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Tabs + Content -->
    <div class="row gy-4 mt-4">

      <!-- LEFT: Tabs -->
      <div class="col-lg-8">
        <div class="profile-tabs">

          <!-- Tab buttons -->
          <div class="tab-buttons">
            <button
              class="tab-button"
              [class.active]="activeTab === 'about'"
              (click)="setTab('about')">
              <i class="bi bi-person"></i> About
            </button>

            <button
              class="tab-button"
              [class.active]="activeTab === 'certifications'"
              (click)="setTab('certifications')">
              <i class="bi bi-mortarboard"></i> Certifications
            </button>

            <button
              class="tab-button"
              [class.active]="activeTab === 'courses'"
              (click)="setTab('courses')">
              <i class="bi bi-book"></i> Courses
            </button>
          </div>

  <!-- Stars -->



  
</div><div class="add-rating mt-4" *ngIf="instructor">
  <h5>Rate {{ instructor.fullName }}</h5>

  <!-- النجوم -->
<div class="stars mb-2">
  <span *ngFor="let star of [1,2,3,4,5]; let i = index"
        (click)="setRating(i+1)"
        (mouseenter)="hoverRating(i+1)"
        (mouseleave)="hoverRating(0)"
        [class.filled]="i < (hoveredRating > 0 ? hoveredRating : ratingValue)"
        [class.disabled]="hasRated">
    ★
  </span>
</div>

  <!-- feedback -->
  <textarea [(ngModel)]="feedback"
            class="form-control mb-2"
            rows="3"
            placeholder="Write your feedback"
            [disabled]="hasRated"></textarea>

  <!-- زرار submit -->
  <button class="btn btn-accent" (click)="submitRating()"
          [disabled]="hasRated || ratingValue === 0">
    Submit Rating
  </button>

  <!-- رسالة لو المستخدم قيم قبل كده -->
  <p *ngIf="hasRated" class="text-success mt-2">
    You already rated this instructor. ✅
  </p>
</div>
          <!-- Tab panels -->
          <!-- About -->
          <div class="tab-panel" *ngIf="activeTab === 'about'">
            <h4>About {{ ins.fullName }}</h4>
            <p>
              This instructor works as <strong>{{ ins.jobTitle }}</strong> and currently teaches
              <strong>{{ ins.numberOfStudents }}</strong> students.
            </p>
            <p>
              You can reach them at <strong>{{ ins.email }}</strong>
              or phone <strong>{{ ins.phoneNumber }}</strong>.
            </p>
            <p>
              (نص مؤقت يمكنك استبداله ببيانات حقيقية من الباك إند لاحقًا).
            </p>
          </div>

          <!-- Certifications -->
          <div class="tab-panel" *ngIf="activeTab === 'certifications'">
            <h4>Certifications</h4>

            <div class="cert-grid" *ngIf="ins.certificateUrl; else noCert">
              <div class="cert-card">
                <div class="cert-image-wrapper">
                  <!-- لو اللينك مش صورة، حط placeholder من assets -->
                  <img [src]="ins.certificateUrl"
                       alt="Certificate"
                       class="cert-image"
                       onerror="this.src='assets/img/apple-touch-icon.png'">
                </div>
                <div class="cert-info">
                  <h5>Official Instructor Certificate</h5>
                  <p>
                    Verified certification for {{ ins.fullName }} as a
                    professional {{ ins.jobTitle }}.
                  </p>
                  <a [href]="ins.certificateUrl" target="_blank" class="cert-link">
                    <i class="bi bi-box-arrow-up-right"></i>
                    View Certificate
                  </a>
                </div>
              </div>
            </div>

            <ng-template #noCert>
              <p>No certifications added yet.</p>
            </ng-template>
          </div>

          <!-- Courses -->
          <div class="tab-panel" *ngIf="activeTab === 'courses'">
            <h4>Courses by {{ ins.fullName }}</h4>

            <div class="courses-grid">
              <div class="course-card" *ngFor="let c of courses">
                <div class="course-header">
                  <span class="course-level">{{ c.level }}</span>
                </div>
                <h5>{{ c.title }}</h5>
                <div class="course-meta">
                  <span><i class="bi bi-people"></i> {{ c.students }} students</span>
                  <span><i class="bi bi-star-fill"></i> {{ c.rating }}</span>
                </div>
                <p class="course-duration">
                  <i class="bi bi-clock"></i> {{ c.duration }}
                </p>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- RIGHT: simple stats widget -->
      <div class="col-lg-4">
        <div class="profile-side-widget">
          <h4>Teaching Impact</h4>
          <div class="side-stats">
            <div class="side-stat-box">
              <div class="number">{{ ins.numberOfStudents }}</div>
              <div class="label">Students</div>
            </div>
            <div class="side-stat-box">
              <div class="number">{{ ins.rating }}</div>
              <div class="label">Rating</div>
            </div>
          </div>

          <div class="side-contact">
            <h5>Contact</h5>
            <p><i class="bi bi-envelope"></i> {{ ins.email }}</p>
            <p><i class="bi bi-telephone"></i> {{ ins.phoneNumber }}</p>
          </div>
        </div>
      </div>

    </div>



</section>
