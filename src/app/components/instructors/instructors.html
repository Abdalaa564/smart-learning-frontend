<div class="featured-instructors container py-4">
  <div class="list-header d-flex justify-content-between align-items-center mb-4 p-3  rounded-3 shadow-sm">
    <h2 class="mb-0 text-dark-heading">
      <i class="bi bi-person-badge-fill me-2 text-accent"></i> Our Expert Instructors
    </h2>

    <button class="btn btn-accent btn-add" type="button" (click)="goToAdd()" *ngIf="isAdmin">
      <i class="bi bi-plus-lg me-1"></i>
      <span>Add New Instructor</span>
    </button>
  </div>

  <div class="row g-4" *ngIf="loading">
    <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8]">
      <app-skeleton-card [showImage]="true" [lines]="3" [showActions]="true" imageHeight="250px" animation="wave">
      </app-skeleton-card>
    </div>
  </div>

  <div class="row g-4" *ngIf="!loading">
    <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let ins of paginatedInstructors">
      <div class="instructor-card-new h-100 shadow-sm border">
        <div class="instructor-image">
          <img [src]="ins.photoUrl || 'assets/images/default-instructor.jpg'" alt="Instructor Photo"
            class="img-fluid w-100 h-100 object-fit-cover" />
            
          <div class="overlay-content p-3">
            <div class="rating-badge bg-white text-dark px-3 py-1 rounded-pill d-flex align-items-center">
              <ng-container *ngFor="let star of getStarsArray()">
                <i class="bi" [ngClass]="{ 'bi-star-fill ': star <= ins.rating, 'bi-star': star > ins.rating }"></i>
              </ng-container>
              <span>{{ ins.rating }}</span>
            </div>
            <div class="students-badge bg-white text-dark px-3 py-1 rounded-pill d-flex align-items-center">
              <i class="bi bi-people-fill me-1"></i>
              <span>{{ ins.numberOfStudents }} Students</span>
            </div>
          </div>
        </div>

        <div class="instructor-info p-3 d-flex flex-column grow">
           <h5 class="text-center fw-bold mb-2 instructor-name">
    {{ ins.fullName }}
  </h5>
          <div class="stats-grid-new row g-2 text-center my-2">
            <div class="col-6 stat border-end">
              <span class="number d-block fw-bold fs-5 text-accent">
                <i class="bi bi-star-fill me-1"></i> {{ ins.rating }}</span>
              <span class="label  small">Rating</span>
            </div>
            <div class="col-6 stat">
              <span class="number d-block fw-bold fs-5 text-accent">
                <i class="bi bi-people-fill me-1"></i> {{ ins.numberOfStudents }}</span>
              <span class="label  small">Students</span>
            </div>
          </div>

          <div class="action-row mt-3 d-flex justify-content-between align-items-center">
            <button class="btn btn-sm btn-outline-accent grow me-2" type="button" (click)="goToProfile(ins.id)">
              View Profile
            </button>

            <div class="icon-actions d-flex gap-2">
              <button
                class="icon-btn-new btn btn-sm btn-light"
                type="button"
                (click)="goToEdit(ins.id)"
                title="Edit" *ngIf="isAdmin"
              >
                <i class="bi bi-pencil-square text-primary"></i>
              </button>
              <button
                class="icon-btn-new btn btn-sm btn-light"
                type="button"
                (click)="goToDeleteConfirm(ins.id)"
                title="Delete" *ngIf="isAdmin">
                <i class="bi bi-trash text-danger"></i>
              </button>
              <a
                class="icon-btn-new btn btn-sm btn-light"
                *ngIf="ins.youtubeChannelUrl"
                [href]="ins.youtubeChannelUrl"
                target="_blank"
                rel="noopener noreferrer"
                title="Youtube"
              >
                <i class="bi bi-youtube text-danger"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-5 mb-3 d-flex justify-content-center" *ngIf="!loading">
    <app-pagination
      [currentPage]="currentPage"
      [totalItems]="instructors.length"
      [itemsPerPage]="itemsPerPage"
      (pageChange)="onPageChange($event)"
    >
    </app-pagination>
  </div>
</div>
